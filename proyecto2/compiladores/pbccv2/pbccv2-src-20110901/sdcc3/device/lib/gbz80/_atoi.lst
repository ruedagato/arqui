                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.0.1 #6227 (Oct  2 2015) (Linux)
                              4 ; This file was generated Fri Oct  2 17:18:19 2015
                              5 ;--------------------------------------------------------
                              6 	.module _atoi
                              7 	.optsdcc -mgbz80
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _atoi
                             13 ;--------------------------------------------------------
                             14 ;  ram data
                             15 ;--------------------------------------------------------
                             16 	.area _DATA
                             17 ;--------------------------------------------------------
                             18 ; overlayable items in  ram 
                             19 ;--------------------------------------------------------
                             20 	.area _OVERLAY
                             21 ;--------------------------------------------------------
                             22 ; external initialized ram data
                             23 ;--------------------------------------------------------
                             24 ;--------------------------------------------------------
                             25 ; global & static initialisations
                             26 ;--------------------------------------------------------
                             27 	.area _HOME
                             28 	.area _GSINIT
                             29 	.area _GSFINAL
                             30 	.area _GSINIT
                             31 ;--------------------------------------------------------
                             32 ; Home
                             33 ;--------------------------------------------------------
                             34 	.area _HOME
                             35 	.area _HOME
                             36 ;--------------------------------------------------------
                             37 ; code
                             38 ;--------------------------------------------------------
                             39 	.area _CODE
                             40 ;../_atoi.c:29: int atoi(const char * s)
                             41 ;	---------------------------------
                             42 ; Function atoi
                             43 ; ---------------------------------
   0000                      44 _atoi_start::
   0000                      45 _atoi:
   0000 E8 F7                46 	lda	sp,-9(sp)
                             47 ;../_atoi.c:31: register int rv=0; 
   0002 F8 07                48 	ldhl	sp,#7
   0004 36 00                49 	ld	(hl),#0x00
   0006 23                   50 	inc	hl
   0007 36 00                51 	ld	(hl),#0x00
                             52 ;../_atoi.c:35: while (*s) {
   0009 F8 0C                53 	ldhl	sp,#12
   000B 2B                   54 	dec	hl
   000C 4E                   55 	ld	c,(hl)
   000D 23                   56 	inc	hl
   000E 46                   57 	ld	b,(hl)
   000F                      58 00107$:
   000F 0A                   59 	ld	a,(bc)
   0010 F8 06                60 	ldhl	sp,#6
   0012 77                   61 	ld	(hl),a
   0013 B7                   62 	or	a,a
   0014 CAr69s00             63 	jp	Z,00133$
                             64 ;../_atoi.c:36: if (*s <= '9' && *s >= '0')
   0017 7E                   65 	ld	a, (hl)
   0018 5F                   66 	ld	e, a
   0019 3E 39                67 	ld	a, #0x39
   001B 57                   68 	ld	d, a
   001C 3E 39                69 	ld	a,#0x39
   001E 96                   70 	sub	a, (hl)
   001F CB 7B                71 	bit	7, e
   0021 CAr2Cs00             72 	jp	Z, 00135$
   0024 CB 7A                73 	bit	7, d
   0026 C2r32s00             74 	jp	NZ, 00136$
   0029 BF                   75 	cp	a, a
   002A 18 06                76 	jr	00136$
   002C                      77 00135$:
   002C CB 7A                78 	bit	7, d
   002E CAr32s00             79 	jp	Z, 00136$
   0031 37                   80 	scf
   0032                      81 00136$:
   0032 DAr55s00             82 	jp	C,00102$
   0035 3E 30                83 	ld	a, #0x30
   0037 5F                   84 	ld	e, a
   0038 F8 06                85 	ldhl	sp,#6
   003A 7E                   86 	ld	a, (hl)
   003B 57                   87 	ld	d, a
   003C 7E                   88 	ld	a,(hl)
   003D D6 30                89 	sub	a, #0x30
   003F CB 7B                90 	bit	7, e
   0041 CAr4Cs00             91 	jp	Z, 00137$
   0044 CB 7A                92 	bit	7, d
   0046 C2r52s00             93 	jp	NZ, 00138$
   0049 BF                   94 	cp	a, a
   004A 18 06                95 	jr	00138$
   004C                      96 00137$:
   004C CB 7A                97 	bit	7, d
   004E CAr52s00             98 	jp	Z, 00138$
   0051 37                   99 	scf
   0052                     100 00138$:
   0052 D2r69s00            101 	jp	NC,00133$
                            102 ;../_atoi.c:37: break;
   0055                     103 00102$:
                            104 ;../_atoi.c:38: if (*s == '-' || *s == '+') 
   0055 0A                  105 	ld	a,(bc)
   0056 F8 06               106 	ldhl	sp,#6
   0058 77                  107 	ld	(hl),a
   0059 7E                  108 	ld	a,(hl)
   005A D6 2D               109 	sub	a,#0x2D
   005C CAr69s00            110 	jp	Z,00133$
   005F                     111 00139$:
   005F 7E                  112 	ld	a,(hl)
   0060 D6 2B               113 	sub	a,#0x2B
   0062 CAr69s00            114 	jp	Z,00133$
   0065                     115 00140$:
                            116 ;../_atoi.c:40: s++;
   0065 03                  117 	inc	bc
   0066 C3r0Fs00            118 	jp	00107$
   0069                     119 00133$:
   0069 F8 0B               120 	ldhl	sp,#11
   006B 71                  121 	ld	(hl),c
   006C 23                  122 	inc	hl
   006D 70                  123 	ld	(hl),b
                            124 ;../_atoi.c:43: sign = (*s == '-');
   006E F8 04               125 	ldhl	sp,#4
   0070 71                  126 	ld	(hl),c
   0071 23                  127 	inc	hl
   0072 70                  128 	ld	(hl),b
   0073 0A                  129 	ld	a,(bc)
   0074 4F                  130 	ld	c,a
   0075 D6 2D               131 	sub	a,#0x2D
   0077 C2r7Es00            132 	jp	NZ,00141$
   007A 3E 01               133 	ld	a,#0x01
   007C 18 01               134 	jr	00142$
   007E                     135 00141$:
   007E AF                  136 	xor	a,a
   007F                     137 00142$:
   007F 47                  138 	ld	b,a
   0080 F8 06               139 	ldhl	sp,#6
   0082 70                  140 	ld	(hl),b
                            141 ;../_atoi.c:44: if (*s == '-' || *s == '+') s++;
   0083 AF                  142 	xor	a,a
   0084 B0                  143 	or	a,b
   0085 C2r90s00            144 	jp	NZ,00110$
   0088 79                  145 	ld	a,c
   0089 D6 2B               146 	sub	a,#0x2B
   008B CAr90s00            147 	jp	Z,00144$
   008E                     148 00143$:
   008E 18 11               149 	jr	00131$
   0090                     150 00144$:
   0090                     151 00110$:
   0090 F8 05               152 	ldhl	sp,#5
   0092 2B                  153 	dec	hl
   0093 5E                  154 	ld	e,(hl)
   0094 23                  155 	inc	hl
   0095 56                  156 	ld	d,(hl)
   0096 21 01 00            157 	ld	hl,#0x0001
   0099 19                  158 	add	hl,de
   009A 7D                  159 	ld	a,l
   009B 54                  160 	ld	d,h
   009C F8 0B               161 	ldhl	sp,#11
   009E 77                  162 	ld	(hl),a
   009F 23                  163 	inc	hl
   00A0 72                  164 	ld	(hl),d
                            165 ;../_atoi.c:46: while (*s && *s >= '0' && *s <= '9') {
   00A1                     166 00131$:
   00A1 F8 0B               167 	ldhl	sp,#11
   00A3 7E                  168 	ld	a,(hl)
   00A4 23                  169 	inc	hl
   00A5 5E                  170 	ld	e,(hl)
   00A6 F8 02               171 	ldhl	sp,#2
   00A8 77                  172 	ld	(hl),a
   00A9 23                  173 	inc	hl
   00AA 73                  174 	ld	(hl),e
   00AB                     175 00115$:
   00AB F8 03               176 	ldhl	sp,#3
   00AD 2B                  177 	dec	hl
   00AE 5E                  178 	ld	e,(hl)
   00AF 23                  179 	inc	hl
   00B0 56                  180 	ld	d,(hl)
   00B1 1A                  181 	ld	a,(de)
   00B2 4F                  182 	ld	c,a
   00B3 B7                  183 	or	a,a
   00B4 CAr2As01            184 	jp	Z,00117$
   00B7 3E 30               185 	ld	a, #0x30
   00B9 5F                  186 	ld	e, a
   00BA 79                  187 	ld	a, c
   00BB 57                  188 	ld	d, a
   00BC 79                  189 	ld	a,c
   00BD D6 30               190 	sub	a, #0x30
   00BF CB 7B               191 	bit	7, e
   00C1 CArCCs00            192 	jp	Z, 00145$
   00C4 CB 7A               193 	bit	7, d
   00C6 C2rD2s00            194 	jp	NZ, 00146$
   00C9 BF                  195 	cp	a, a
   00CA 18 06               196 	jr	00146$
   00CC                     197 00145$:
   00CC CB 7A               198 	bit	7, d
   00CE CArD2s00            199 	jp	Z, 00146$
   00D1 37                  200 	scf
   00D2                     201 00146$:
   00D2 DAr2As01            202 	jp	C,00117$
   00D5 79                  203 	ld	a, c
   00D6 5F                  204 	ld	e, a
   00D7 3E 39               205 	ld	a, #0x39
   00D9 57                  206 	ld	d, a
   00DA 3E 39               207 	ld	a,#0x39
   00DC 91                  208 	sub	a, c
   00DD CB 7B               209 	bit	7, e
   00DF CArEAs00            210 	jp	Z, 00147$
   00E2 CB 7A               211 	bit	7, d
   00E4 C2rF0s00            212 	jp	NZ, 00148$
   00E7 BF                  213 	cp	a, a
   00E8 18 06               214 	jr	00148$
   00EA                     215 00147$:
   00EA CB 7A               216 	bit	7, d
   00EC CArF0s00            217 	jp	Z, 00148$
   00EF 37                  218 	scf
   00F0                     219 00148$:
   00F0 DAr2As01            220 	jp	C,00117$
                            221 ;../_atoi.c:47: rv = (rv * 10) + (*s - '0');
   00F3 F8 08               222 	ldhl	sp,#8
   00F5 2B                  223 	dec	hl
   00F6 5E                  224 	ld	e,(hl)
   00F7 23                  225 	inc	hl
   00F8 56                  226 	ld	d,(hl)
   00F9 6B                  227 	ld	l,e
   00FA 62                  228 	ld	h,d
   00FB 29                  229 	add	hl,hl
   00FC 29                  230 	add	hl,hl
   00FD 19                  231 	add	hl,de
   00FE 29                  232 	add	hl,hl
   00FF 7D                  233 	ld	a,l
   0100 54                  234 	ld	d,h
   0101 F8 00               235 	ldhl	sp,#0
   0103 77                  236 	ld	(hl),a
   0104 23                  237 	inc	hl
   0105 72                  238 	ld	(hl),d
   0106 79                  239 	ld	a,c
   0107 17                  240 	rla	
   0108 9F                  241 	sbc	a,a
   0109 47                  242 	ld	b,a
   010A 79                  243 	ld	a,c
   010B C6 D0               244 	add	a,#0xD0
   010D 4F                  245 	ld	c,a
   010E 78                  246 	ld	a,b
   010F CE FF               247 	adc	a,#0xFF
   0111 47                  248 	ld	b,a
   0112 2B                  249 	dec	hl
   0113 7E                  250 	ld	a,(hl)
   0114 23                  251 	inc	hl
   0115 66                  252 	ld	h,(hl)
   0116 6F                  253 	ld	l,a
   0117 09                  254 	add	hl,bc
   0118 4D                  255 	ld	c,l
   0119 44                  256 	ld	b,h
   011A F8 07               257 	ldhl	sp,#7
   011C 71                  258 	ld	(hl),c
   011D 23                  259 	inc	hl
   011E 70                  260 	ld	(hl),b
                            261 ;../_atoi.c:48: s++;
   011F F8 02               262 	ldhl	sp,#2
   0121 34                  263 	inc	(hl)
   0122 C2rABs00            264 	jp	NZ,00115$
   0125 23                  265 	inc	hl
   0126 34                  266 	inc	(hl)
   0127                     267 00149$:
   0127 C3rABs00            268 	jp	00115$
   012A                     269 00117$:
                            270 ;../_atoi.c:51: return (sign ? -rv : rv);
   012A AF                  271 	xor	a,a
   012B F8 06               272 	ldhl	sp,#6
   012D B6                  273 	or	a,(hl)
   012E CAr3Es01            274 	jp	Z,00120$
   0131 AF                  275 	xor	a,a
   0132 23                  276 	inc	hl
   0133 3E 00               277 	ld	a,#0x00
   0135 9E                  278 	sbc	a,(hl)
   0136 4F                  279 	ld	c,a
   0137 23                  280 	inc	hl
   0138 3E 00               281 	ld	a,#0x00
   013A 9E                  282 	sbc	a,(hl)
   013B 47                  283 	ld	b,a
   013C 18 06               284 	jr	00121$
   013E                     285 00120$:
   013E F8 08               286 	ldhl	sp,#8
   0140 2B                  287 	dec	hl
   0141 4E                  288 	ld	c,(hl)
   0142 23                  289 	inc	hl
   0143 46                  290 	ld	b,(hl)
   0144                     291 00121$:
   0144 59                  292 	ld	e,c
   0145 50                  293 	ld	d,b
   0146                     294 00118$:
   0146 E8 09               295 	lda	sp,9(sp)
   0148 C9                  296 	ret
   0149                     297 _atoi_end::
                            298 	.area _CODE
                            299 	.area _CABS
