                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.0.1 #6227 (Oct  2 2015) (Linux)
                              4 ; This file was generated Fri Oct  2 17:18:20 2015
                              5 ;--------------------------------------------------------
                              6 	.module gets
                              7 	.optsdcc -mgbz80
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _gets
                             13 ;--------------------------------------------------------
                             14 ;  ram data
                             15 ;--------------------------------------------------------
                             16 	.area _DATA
                             17 ;--------------------------------------------------------
                             18 ; overlayable items in  ram 
                             19 ;--------------------------------------------------------
                             20 	.area _OVERLAY
                             21 ;--------------------------------------------------------
                             22 ; external initialized ram data
                             23 ;--------------------------------------------------------
                             24 ;--------------------------------------------------------
                             25 ; global & static initialisations
                             26 ;--------------------------------------------------------
                             27 	.area _HOME
                             28 	.area _GSINIT
                             29 	.area _GSFINAL
                             30 	.area _GSINIT
                             31 ;--------------------------------------------------------
                             32 ; Home
                             33 ;--------------------------------------------------------
                             34 	.area _HOME
                             35 	.area _HOME
                             36 ;--------------------------------------------------------
                             37 ; code
                             38 ;--------------------------------------------------------
                             39 	.area _CODE
                             40 ;../gets.c:32: gets (char *s)
                             41 ;	---------------------------------
                             42 ; Function gets
                             43 ; ---------------------------------
   0000                      44 _gets_start::
   0000                      45 _gets:
   0000 E8 FB                46 	lda	sp,-5(sp)
                             47 ;../gets.c:35: unsigned int count = 0;
   0002 F8 02                48 	ldhl	sp,#2
   0004 36 00                49 	ld	(hl),#0x00
   0006 23                   50 	inc	hl
   0007 36 00                51 	ld	(hl),#0x00
                             52 ;../gets.c:37: while (1)
   0009                      53 00109$:
                             54 ;../gets.c:39: c = getchar ();
   0009 CDr00s00             55 	call	_getchar
   000C 4B                   56 	ld	c,e
   000D F8 04                57 	ldhl	sp,#4
   000F 71                   58 	ld	(hl),c
                             59 ;../gets.c:40: switch(c)
   0010 7E                   60 	ld	a,(hl)
   0011 D6 08                61 	sub	a,#0x08
   0013 CAr25s00             62 	jp	Z,00101$
   0016                      63 00118$:
   0016 7E                   64 	ld	a,(hl)
   0017 D6 0A                65 	sub	a,#0x0A
   0019 CAr61s00             66 	jp	Z,00105$
   001C                      67 00119$:
   001C 7E                   68 	ld	a,(hl)
   001D D6 0D                69 	sub	a,#0x0D
   001F CAr61s00             70 	jp	Z,00105$
   0022                      71 00120$:
   0022 C3r8As00             72 	jp	00106$
                             73 ;../gets.c:42: case '\b': /* backspace */
   0025                      74 00101$:
                             75 ;../gets.c:43: if (count)
   0025 F8 02                76 	ldhl	sp,#2
   0027 7E                   77 	ld	a,(hl)
   0028 23                   78 	inc	hl
   0029 B6                   79 	or	a,(hl)
   002A CAr09s00             80 	jp	Z,00109$
                             81 ;../gets.c:45: putchar ('\b');
   002D 3E 08                82 	ld	a,#0x08
   002F F5                   83 	push	af
   0030 33                   84 	inc	sp
   0031 CDr00s00             85 	call	_putchar
   0034 E8 01                86 	lda	sp,1(sp)
                             87 ;../gets.c:46: putchar (' ');
   0036 3E 20                88 	ld	a,#0x20
   0038 F5                   89 	push	af
   0039 33                   90 	inc	sp
   003A CDr00s00             91 	call	_putchar
   003D E8 01                92 	lda	sp,1(sp)
                             93 ;../gets.c:47: putchar ('\b');
   003F 3E 08                94 	ld	a,#0x08
   0041 F5                   95 	push	af
   0042 33                   96 	inc	sp
   0043 CDr00s00             97 	call	_putchar
   0046 E8 01                98 	lda	sp,1(sp)
                             99 ;../gets.c:48: --s;
   0048 F8 08               100 	ldhl	sp,#8
   004A 2B                  101 	dec	hl
   004B 5E                  102 	ld	e,(hl)
   004C 23                  103 	inc	hl
   004D 56                  104 	ld	d,(hl)
   004E 1B                  105 	dec	de
   004F 2B                  106 	dec	hl
   0050 73                  107 	ld	(hl),e
   0051 23                  108 	inc	hl
   0052 72                  109 	ld	(hl),d
                            110 ;../gets.c:49: --count;
   0053 F8 03               111 	ldhl	sp,#3
   0055 2B                  112 	dec	hl
   0056 5E                  113 	ld	e,(hl)
   0057 23                  114 	inc	hl
   0058 56                  115 	ld	d,(hl)
   0059 1B                  116 	dec	de
   005A 2B                  117 	dec	hl
   005B 73                  118 	ld	(hl),e
   005C 23                  119 	inc	hl
   005D 72                  120 	ld	(hl),d
                            121 ;../gets.c:51: break;
   005E C3r09s00            122 	jp	00109$
                            123 ;../gets.c:54: case '\r': /* CR or LF */
   0061                     124 00105$:
                            125 ;../gets.c:55: putchar ('\r');
   0061 3E 0D               126 	ld	a,#0x0D
   0063 F5                  127 	push	af
   0064 33                  128 	inc	sp
   0065 CDr00s00            129 	call	_putchar
   0068 E8 01               130 	lda	sp,1(sp)
                            131 ;../gets.c:56: putchar ('\n');
   006A 3E 0A               132 	ld	a,#0x0A
   006C F5                  133 	push	af
   006D 33                  134 	inc	sp
   006E CDr00s00            135 	call	_putchar
   0071 E8 01               136 	lda	sp,1(sp)
                            137 ;../gets.c:57: *s = 0;
   0073 F8 07               138 	ldhl	sp,#7
   0075 7E                  139 	ld	a,(hl)
   0076 23                  140 	inc	hl
   0077 5E                  141 	ld	e,(hl)
   0078 F8 00               142 	ldhl	sp,#0
   007A 77                  143 	ld	(hl),a
   007B 23                  144 	inc	hl
   007C 73                  145 	ld	(hl),e
   007D 2B                  146 	dec	hl
   007E 5E                  147 	ld	e,(hl)
   007F 23                  148 	inc	hl
   0080 56                  149 	ld	d,(hl)
   0081 3E 00               150 	ld	a,#0x00
   0083 12                  151 	ld	(de),a
                            152 ;../gets.c:58: return s;
   0084 2B                  153 	dec	hl
   0085 5E                  154 	ld	e,(hl)
   0086 23                  155 	inc	hl
   0087 56                  156 	ld	d,(hl)
   0088 18 29               157 	jr	00111$
                            158 ;../gets.c:60: default:
   008A                     159 00106$:
                            160 ;../gets.c:61: *s++ = c;
   008A F8 08               161 	ldhl	sp,#8
   008C 2B                  162 	dec	hl
   008D 4E                  163 	ld	c,(hl)
   008E 23                  164 	inc	hl
   008F 46                  165 	ld	b,(hl)
   0090 F8 04               166 	ldhl	sp,#4
   0092 7E                  167 	ld	a,(hl)
   0093 02                  168 	ld	(bc),a
   0094 21 01 00            169 	ld	hl,#0x0001
   0097 09                  170 	add	hl,bc
   0098 7D                  171 	ld	a,l
   0099 54                  172 	ld	d,h
   009A F8 07               173 	ldhl	sp,#7
   009C 77                  174 	ld	(hl),a
   009D 23                  175 	inc	hl
   009E 72                  176 	ld	(hl),d
                            177 ;../gets.c:62: ++count;
   009F F8 02               178 	ldhl	sp,#2
   00A1 34                  179 	inc	(hl)
   00A2 C2rA7s00            180 	jp	NZ,00121$
   00A5 23                  181 	inc	hl
   00A6 34                  182 	inc	(hl)
   00A7                     183 00121$:
                            184 ;../gets.c:63: putchar (c);
   00A7 23                  185 	inc	hl
   00A8 7E                  186 	ld	a,(hl)
   00A9 F5                  187 	push	af
   00AA 33                  188 	inc	sp
   00AB CDr00s00            189 	call	_putchar
   00AE E8 01               190 	lda	sp,1(sp)
                            191 ;../gets.c:65: }
   00B0 C3r09s00            192 	jp	00109$
   00B3                     193 00111$:
   00B3 E8 05               194 	lda	sp,5(sp)
   00B5 C9                  195 	ret
   00B6                     196 _gets_end::
                            197 	.area _CODE
                            198 	.area _CABS
