                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.0.1 #6227 (Oct  2 2015) (Linux)
                              4 ; This file was generated Fri Oct  2 17:15:25 2015
                              5 ;--------------------------------------------------------
                              6 	.module rand
                              7 	.optsdcc -mmcs51 --model-medium
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _rand
                             13 	.globl _srand
                             14 ;--------------------------------------------------------
                             15 ; special function registers
                             16 ;--------------------------------------------------------
                             17 	.area RSEG    (ABS,DATA)
   0000                      18 	.org 0x0000
                             19 ;--------------------------------------------------------
                             20 ; special function bits
                             21 ;--------------------------------------------------------
                             22 	.area RSEG    (ABS,DATA)
   0000                      23 	.org 0x0000
                             24 ;--------------------------------------------------------
                             25 ; overlayable register banks
                             26 ;--------------------------------------------------------
                             27 	.area REG_BANK_0	(REL,OVR,DATA)
   0000                      28 	.ds 8
                             29 ;--------------------------------------------------------
                             30 ; internal ram data
                             31 ;--------------------------------------------------------
                             32 	.area DSEG    (DATA)
                             33 ;--------------------------------------------------------
                             34 ; overlayable items in internal ram 
                             35 ;--------------------------------------------------------
                             36 	.area OSEG    (OVR,DATA)
                             37 ;--------------------------------------------------------
                             38 ; indirectly addressable internal ram data
                             39 ;--------------------------------------------------------
                             40 	.area ISEG    (DATA)
                             41 ;--------------------------------------------------------
                             42 ; absolute internal ram data
                             43 ;--------------------------------------------------------
                             44 	.area IABS    (ABS,DATA)
                             45 	.area IABS    (ABS,DATA)
                             46 ;--------------------------------------------------------
                             47 ; bit data
                             48 ;--------------------------------------------------------
                             49 	.area BSEG    (BIT)
                             50 ;--------------------------------------------------------
                             51 ; paged external ram data
                             52 ;--------------------------------------------------------
                             53 	.area PSEG    (PAG,XDATA)
   0000                      54 _next:
   0000                      55 	.ds 4
                             56 ;--------------------------------------------------------
                             57 ; external ram data
                             58 ;--------------------------------------------------------
                             59 	.area XSEG    (XDATA)
                             60 ;--------------------------------------------------------
                             61 ; absolute external ram data
                             62 ;--------------------------------------------------------
                             63 	.area XABS    (ABS,XDATA)
                             64 ;--------------------------------------------------------
                             65 ; external initialized ram data
                             66 ;--------------------------------------------------------
                             67 	.area XISEG   (XDATA)
                             68 	.area HOME    (CODE)
                             69 	.area GSINIT0 (CODE)
                             70 	.area GSINIT1 (CODE)
                             71 	.area GSINIT2 (CODE)
                             72 	.area GSINIT3 (CODE)
                             73 	.area GSINIT4 (CODE)
                             74 	.area GSINIT5 (CODE)
                             75 	.area GSINIT  (CODE)
                             76 	.area GSFINAL (CODE)
                             77 	.area CSEG    (CODE)
                             78 ;--------------------------------------------------------
                             79 ; global & static initialisations
                             80 ;--------------------------------------------------------
                             81 	.area HOME    (CODE)
                             82 	.area GSINIT  (CODE)
                             83 	.area GSFINAL (CODE)
                             84 	.area GSINIT  (CODE)
                             85 ;	rand.c:31: static unsigned long int next = 1;
   0000 78r00                86 	mov	r0,#_next
   0002 74 01                87 	mov	a,#0x01
   0004 F2                   88 	movx	@r0,a
   0005 08                   89 	inc	r0
   0006 E4                   90 	clr	a
   0007 F2                   91 	movx	@r0,a
   0008 08                   92 	inc	r0
   0009 F2                   93 	movx	@r0,a
   000A 08                   94 	inc	r0
   000B F2                   95 	movx	@r0,a
                             96 ;--------------------------------------------------------
                             97 ; Home
                             98 ;--------------------------------------------------------
                             99 	.area HOME    (CODE)
                            100 	.area HOME    (CODE)
                            101 ;--------------------------------------------------------
                            102 ; code
                            103 ;--------------------------------------------------------
                            104 	.area CSEG    (CODE)
                            105 ;------------------------------------------------------------
                            106 ;Allocation info for local variables in function 'rand'
                            107 ;------------------------------------------------------------
                            108 ;------------------------------------------------------------
                            109 ;	rand.c:33: int rand(void)
                            110 ;	-----------------------------------------
                            111 ;	 function rand
                            112 ;	-----------------------------------------
   0000                     113 _rand:
                    0002    114 	ar2 = 0x02
                    0003    115 	ar3 = 0x03
                    0004    116 	ar4 = 0x04
                    0005    117 	ar5 = 0x05
                    0006    118 	ar6 = 0x06
                    0007    119 	ar7 = 0x07
                    0000    120 	ar0 = 0x00
                    0001    121 	ar1 = 0x01
                            122 ;	rand.c:35: next = next * 1103515245UL + 12345;
   0000 78r00               123 	mov	r0,#_next
   0002 79r00               124 	mov	r1,#__mullong_PARM_2
   0004 E2                  125 	movx	a,@r0
   0005 F3                  126 	movx	@r1,a
   0006 08                  127 	inc	r0
   0007 E2                  128 	movx	a,@r0
   0008 09                  129 	inc	r1
   0009 F3                  130 	movx	@r1,a
   000A 08                  131 	inc	r0
   000B E2                  132 	movx	a,@r0
   000C 09                  133 	inc	r1
   000D F3                  134 	movx	@r1,a
   000E 08                  135 	inc	r0
   000F E2                  136 	movx	a,@r0
   0010 09                  137 	inc	r1
   0011 F3                  138 	movx	@r1,a
   0012 90 4E 6D            139 	mov	dptr,#0x4E6D
   0015 75 F0 C6            140 	mov	b,#0xC6
   0018 74 41               141 	mov	a,#0x41
   001A 12s00r00            142 	lcall	__mullong
   001D AA 82               143 	mov	r2,dpl
   001F AB 83               144 	mov	r3,dph
   0021 AC F0               145 	mov	r4,b
   0023 FD                  146 	mov	r5,a
   0024 78r00               147 	mov	r0,#_next
   0026 74 39               148 	mov	a,#0x39
   0028 2A                  149 	add	a,r2
   0029 F2                  150 	movx	@r0,a
   002A 74 30               151 	mov	a,#0x30
   002C 3B                  152 	addc	a,r3
   002D 08                  153 	inc	r0
   002E F2                  154 	movx	@r0,a
   002F E4                  155 	clr	a
   0030 3C                  156 	addc	a,r4
   0031 08                  157 	inc	r0
   0032 F2                  158 	movx	@r0,a
   0033 E4                  159 	clr	a
   0034 3D                  160 	addc	a,r5
   0035 08                  161 	inc	r0
   0036 F2                  162 	movx	@r0,a
                            163 ;	rand.c:36: return (unsigned int)(next/65536) % (RAND_MAX + 1U);
   0037 78r02               164 	mov	r0,#(_next + 2)
   0039 E2                  165 	movx	a,@r0
   003A FA                  166 	mov	r2,a
   003B 08                  167 	inc	r0
   003C E2                  168 	movx	a,@r0
   003D FB                  169 	mov	r3,a
   003E 8A 82               170 	mov	dpl,r2
   0040 74 7F               171 	mov	a,#0x7F
   0042 5B                  172 	anl	a,r3
   0043 F5 83               173 	mov	dph,a
   0045 22                  174 	ret
                            175 ;------------------------------------------------------------
                            176 ;Allocation info for local variables in function 'srand'
                            177 ;------------------------------------------------------------
                            178 ;------------------------------------------------------------
                            179 ;	rand.c:39: void srand(unsigned int seed)
                            180 ;	-----------------------------------------
                            181 ;	 function srand
                            182 ;	-----------------------------------------
   0046                     183 _srand:
   0046 AA 82               184 	mov	r2,dpl
   0048 AB 83               185 	mov	r3,dph
                            186 ;	rand.c:41: next = seed;
   004A 78r00               187 	mov	r0,#_next
   004C EA                  188 	mov	a,r2
   004D F2                  189 	movx	@r0,a
   004E 08                  190 	inc	r0
   004F EB                  191 	mov	a,r3
   0050 F2                  192 	movx	@r0,a
   0051 08                  193 	inc	r0
   0052 E4                  194 	clr	a
   0053 F2                  195 	movx	@r0,a
   0054 08                  196 	inc	r0
   0055 F2                  197 	movx	@r0,a
   0056 22                  198 	ret
                            199 	.area CSEG    (CODE)
                            200 	.area CONST   (CODE)
                            201 	.area XINIT   (CODE)
                            202 	.area CABS    (ABS,CODE)
