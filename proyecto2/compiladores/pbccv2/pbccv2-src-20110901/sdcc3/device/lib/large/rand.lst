                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.0.1 #6227 (Oct  2 2015) (Linux)
                              4 ; This file was generated Fri Oct  2 17:15:28 2015
                              5 ;--------------------------------------------------------
                              6 	.module rand
                              7 	.optsdcc -mmcs51 --model-large
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _rand
                             13 	.globl _srand
                             14 ;--------------------------------------------------------
                             15 ; special function registers
                             16 ;--------------------------------------------------------
                             17 	.area RSEG    (ABS,DATA)
   0000                      18 	.org 0x0000
                             19 ;--------------------------------------------------------
                             20 ; special function bits
                             21 ;--------------------------------------------------------
                             22 	.area RSEG    (ABS,DATA)
   0000                      23 	.org 0x0000
                             24 ;--------------------------------------------------------
                             25 ; overlayable register banks
                             26 ;--------------------------------------------------------
                             27 	.area REG_BANK_0	(REL,OVR,DATA)
   0000                      28 	.ds 8
                             29 ;--------------------------------------------------------
                             30 ; internal ram data
                             31 ;--------------------------------------------------------
                             32 	.area DSEG    (DATA)
                             33 ;--------------------------------------------------------
                             34 ; overlayable items in internal ram 
                             35 ;--------------------------------------------------------
                             36 	.area OSEG    (OVR,DATA)
                             37 ;--------------------------------------------------------
                             38 ; indirectly addressable internal ram data
                             39 ;--------------------------------------------------------
                             40 	.area ISEG    (DATA)
                             41 ;--------------------------------------------------------
                             42 ; absolute internal ram data
                             43 ;--------------------------------------------------------
                             44 	.area IABS    (ABS,DATA)
                             45 	.area IABS    (ABS,DATA)
                             46 ;--------------------------------------------------------
                             47 ; bit data
                             48 ;--------------------------------------------------------
                             49 	.area BSEG    (BIT)
                             50 ;--------------------------------------------------------
                             51 ; paged external ram data
                             52 ;--------------------------------------------------------
                             53 	.area PSEG    (PAG,XDATA)
                             54 ;--------------------------------------------------------
                             55 ; external ram data
                             56 ;--------------------------------------------------------
                             57 	.area XSEG    (XDATA)
   0000                      58 _srand_seed_1_1:
   0000                      59 	.ds 2
                             60 ;--------------------------------------------------------
                             61 ; absolute external ram data
                             62 ;--------------------------------------------------------
                             63 	.area XABS    (ABS,XDATA)
                             64 ;--------------------------------------------------------
                             65 ; external initialized ram data
                             66 ;--------------------------------------------------------
                             67 	.area XISEG   (XDATA)
   0000                      68 _next:
   0000                      69 	.ds 4
                             70 	.area HOME    (CODE)
                             71 	.area GSINIT0 (CODE)
                             72 	.area GSINIT1 (CODE)
                             73 	.area GSINIT2 (CODE)
                             74 	.area GSINIT3 (CODE)
                             75 	.area GSINIT4 (CODE)
                             76 	.area GSINIT5 (CODE)
                             77 	.area GSINIT  (CODE)
                             78 	.area GSFINAL (CODE)
                             79 	.area CSEG    (CODE)
                             80 ;--------------------------------------------------------
                             81 ; global & static initialisations
                             82 ;--------------------------------------------------------
                             83 	.area HOME    (CODE)
                             84 	.area GSINIT  (CODE)
                             85 	.area GSFINAL (CODE)
                             86 	.area GSINIT  (CODE)
                             87 ;--------------------------------------------------------
                             88 ; Home
                             89 ;--------------------------------------------------------
                             90 	.area HOME    (CODE)
                             91 	.area HOME    (CODE)
                             92 ;--------------------------------------------------------
                             93 ; code
                             94 ;--------------------------------------------------------
                             95 	.area CSEG    (CODE)
                             96 ;------------------------------------------------------------
                             97 ;Allocation info for local variables in function 'rand'
                             98 ;------------------------------------------------------------
                             99 ;------------------------------------------------------------
                            100 ;	rand.c:33: int rand(void)
                            101 ;	-----------------------------------------
                            102 ;	 function rand
                            103 ;	-----------------------------------------
   0000                     104 _rand:
                    0002    105 	ar2 = 0x02
                    0003    106 	ar3 = 0x03
                    0004    107 	ar4 = 0x04
                    0005    108 	ar5 = 0x05
                    0006    109 	ar6 = 0x06
                    0007    110 	ar7 = 0x07
                    0000    111 	ar0 = 0x00
                    0001    112 	ar1 = 0x01
                            113 ;	rand.c:35: next = next * 1103515245UL + 12345;
   0000 90s00r00            114 	mov	dptr,#_next
   0003 E0                  115 	movx	a,@dptr
   0004 FA                  116 	mov	r2,a
   0005 A3                  117 	inc	dptr
   0006 E0                  118 	movx	a,@dptr
   0007 FB                  119 	mov	r3,a
   0008 A3                  120 	inc	dptr
   0009 E0                  121 	movx	a,@dptr
   000A FC                  122 	mov	r4,a
   000B A3                  123 	inc	dptr
   000C E0                  124 	movx	a,@dptr
   000D FD                  125 	mov	r5,a
   000E 90s00r00            126 	mov	dptr,#__mullong_PARM_2
   0011 EA                  127 	mov	a,r2
   0012 F0                  128 	movx	@dptr,a
   0013 A3                  129 	inc	dptr
   0014 EB                  130 	mov	a,r3
   0015 F0                  131 	movx	@dptr,a
   0016 A3                  132 	inc	dptr
   0017 EC                  133 	mov	a,r4
   0018 F0                  134 	movx	@dptr,a
   0019 A3                  135 	inc	dptr
   001A ED                  136 	mov	a,r5
   001B F0                  137 	movx	@dptr,a
   001C 90 4E 6D            138 	mov	dptr,#0x4E6D
   001F 75 F0 C6            139 	mov	b,#0xC6
   0022 74 41               140 	mov	a,#0x41
   0024 12s00r00            141 	lcall	__mullong
   0027 AA 82               142 	mov	r2,dpl
   0029 AB 83               143 	mov	r3,dph
   002B AC F0               144 	mov	r4,b
   002D FD                  145 	mov	r5,a
   002E 90s00r00            146 	mov	dptr,#_next
   0031 74 39               147 	mov	a,#0x39
   0033 2A                  148 	add	a,r2
   0034 F0                  149 	movx	@dptr,a
   0035 74 30               150 	mov	a,#0x30
   0037 3B                  151 	addc	a,r3
   0038 A3                  152 	inc	dptr
   0039 F0                  153 	movx	@dptr,a
   003A E4                  154 	clr	a
   003B 3C                  155 	addc	a,r4
   003C A3                  156 	inc	dptr
   003D F0                  157 	movx	@dptr,a
   003E E4                  158 	clr	a
   003F 3D                  159 	addc	a,r5
   0040 A3                  160 	inc	dptr
   0041 F0                  161 	movx	@dptr,a
                            162 ;	rand.c:36: return (unsigned int)(next/65536) % (RAND_MAX + 1U);
   0042 90s00r00            163 	mov	dptr,#_next
   0045 E0                  164 	movx	a,@dptr
   0046 A3                  165 	inc	dptr
   0047 E0                  166 	movx	a,@dptr
   0048 A3                  167 	inc	dptr
   0049 E0                  168 	movx	a,@dptr
   004A FC                  169 	mov	r4,a
   004B A3                  170 	inc	dptr
   004C E0                  171 	movx	a,@dptr
   004D FD                  172 	mov	r5,a
   004E 8C 02               173 	mov	ar2,r4
   0050 8D 03               174 	mov	ar3,r5
   0052 53 03 7F            175 	anl	ar3,#0x7F
   0055 8A 82               176 	mov	dpl,r2
   0057 8B 83               177 	mov	dph,r3
   0059 22                  178 	ret
                            179 ;------------------------------------------------------------
                            180 ;Allocation info for local variables in function 'srand'
                            181 ;------------------------------------------------------------
                            182 ;seed                      Allocated with name '_srand_seed_1_1'
                            183 ;------------------------------------------------------------
                            184 ;	rand.c:39: void srand(unsigned int seed)
                            185 ;	-----------------------------------------
                            186 ;	 function srand
                            187 ;	-----------------------------------------
   005A                     188 _srand:
                            189 ;	rand.c:41: next = seed;
   005A AA 83               190 	mov	r2,dph
   005C E5 82               191 	mov	a,dpl
   005E 90s00r00            192 	mov	dptr,#_srand_seed_1_1
   0061 F0                  193 	movx	@dptr,a
   0062 A3                  194 	inc	dptr
   0063 CA                  195 	xch	a,r2
   0064 F0                  196 	movx	@dptr,a
   0065 FB                  197 	mov	r3,a
   0066 90s00r00            198 	mov	dptr,#_next
   0069 EA                  199 	mov	a,r2
   006A F0                  200 	movx	@dptr,a
   006B A3                  201 	inc	dptr
   006C EB                  202 	mov	a,r3
   006D F0                  203 	movx	@dptr,a
   006E A3                  204 	inc	dptr
   006F E4                  205 	clr	a
   0070 F0                  206 	movx	@dptr,a
   0071 A3                  207 	inc	dptr
   0072 F0                  208 	movx	@dptr,a
   0073 22                  209 	ret
                            210 	.area CSEG    (CODE)
                            211 	.area CONST   (CODE)
                            212 	.area XINIT   (CODE)
   0000                     213 __xinit__next:
   0000 01 00 00 00         214 	.byte #0x01,#0x00,#0x00,#0x00	; 1
                            215 	.area CABS    (ABS,CODE)
