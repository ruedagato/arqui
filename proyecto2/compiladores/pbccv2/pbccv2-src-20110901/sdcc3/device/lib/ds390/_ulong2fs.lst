                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.0.1 #6227 (Oct  2 2015) (Linux)
                              4 ; This file was generated Fri Oct  2 17:15:15 2015
                              5 ;--------------------------------------------------------
                              6 	.module _ulong2fs
                              7 	.optsdcc -mds390 --model-flat24
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; CPU specific extensions
                             11 ;--------------------------------------------------------
                             12 .flat24 on		; 24 bit flat addressing
                    0084     13 dpl1	=	0x84
                    0085     14 dph1	=	0x85
                    0086     15 dps	=	0x86
                    0093     16 dpx	=	0x93
                    0095     17 dpx1	=	0x95
                    009B     18 esp	=	0x9B
                    009C     19 ap	=	0x9C
                    009C     20 _ap	=	0x9C
                    00D1     21 mcnt0	=	0xD1
                    00D2     22 mcnt1	=	0xD2
                    00D3     23 ma	=	0xD3
                    00D4     24 mb	=	0xD4
                    00D5     25 mc	=	0xD5
                    00D1     26 F1	=	0xD1	; user flag
                             27 ;--------------------------------------------------------
                             28 ; Public variables in this module
                             29 ;--------------------------------------------------------
                             30 	.globl ___ulong2fs
                             31 ;--------------------------------------------------------
                             32 ; special function registers
                             33 ;--------------------------------------------------------
                             34 ;--------------------------------------------------------
                             35 ; special function bits
                             36 ;--------------------------------------------------------
                             37 ;--------------------------------------------------------
                             38 ; overlayable register banks
                             39 ;--------------------------------------------------------
                             40 	.area REG_BANK_0	(REL,OVR,DATA)
   0000                      41 	.ds 8
                             42 ;--------------------------------------------------------
                             43 ; internal ram data
                             44 ;--------------------------------------------------------
                             45 	.area DSEG    (DATA)
                             46 ;--------------------------------------------------------
                             47 ; overlayable items in internal ram 
                             48 ;--------------------------------------------------------
                             49 	.area OSEG    (OVR,DATA)
                             50 ;--------------------------------------------------------
                             51 ; indirectly addressable internal ram data
                             52 ;--------------------------------------------------------
                             53 	.area ISEG    (DATA)
                             54 ;--------------------------------------------------------
                             55 ; absolute internal ram data
                             56 ;--------------------------------------------------------
                             57 	.area IABS    (ABS,DATA)
                             58 	.area IABS    (ABS,DATA)
                             59 ;--------------------------------------------------------
                             60 ; bit data
                             61 ;--------------------------------------------------------
                             62 	.area BSEG    (BIT)
                             63 ;--------------------------------------------------------
                             64 ; paged external ram data
                             65 ;--------------------------------------------------------
                             66 	.area PSEG    (PAG,XDATA)
                             67 ;--------------------------------------------------------
                             68 ; external ram data
                             69 ;--------------------------------------------------------
                             70 	.area XSEG    (XDATA)
   0000                      71 ___ulong2fs_a_1_1:
   0000                      72 	.ds 4
   0004                      73 ___ulong2fs_fl_1_1:
   0004                      74 	.ds 4
                             75 ;--------------------------------------------------------
                             76 ; absolute external ram data
                             77 ;--------------------------------------------------------
                             78 	.area XABS    (ABS,XDATA)
                             79 ;--------------------------------------------------------
                             80 ; external initialized ram data
                             81 ;--------------------------------------------------------
                             82 	.area XISEG   (XDATA)
                             83 ;--------------------------------------------------------
                             84 ; global & static initialisations
                             85 ;--------------------------------------------------------
                             86 	.area HOME    (CODE)
                             87 	.area GSINIT  (CODE)
                             88 	.area GSFINAL (CODE)
                             89 	.area GSINIT  (CODE)
                             90 ;--------------------------------------------------------
                             91 ; Home
                             92 ;--------------------------------------------------------
                             93 	.area HOME    (CODE)
                             94 	.area HOME    (CODE)
                             95 ;--------------------------------------------------------
                             96 ; code
                             97 ;--------------------------------------------------------
                             98 	.area CSEG    (CODE)
                             99 ;------------------------------------------------------------
                            100 ;Allocation info for local variables in function '__ulong2fs'
                            101 ;------------------------------------------------------------
                            102 ;a                         Allocated with name '___ulong2fs_a_1_1'
                            103 ;exp                       Allocated to registers r4 r5 
                            104 ;fl                        Allocated with name '___ulong2fs_fl_1_1'
                            105 ;------------------------------------------------------------
                            106 ;	_ulong2fs.c:83: float __ulong2fs (unsigned long a )
                            107 ;	-----------------------------------------
                            108 ;	 function __ulong2fs
                            109 ;	-----------------------------------------
   0000                     110 ___ulong2fs:
                    0002    111 	ar2 = 0x02
                    0003    112 	ar3 = 0x03
                    0004    113 	ar4 = 0x04
                    0005    114 	ar5 = 0x05
                    0006    115 	ar6 = 0x06
                    0007    116 	ar7 = 0x07
                    0000    117 	ar0 = 0x00
                    0001    118 	ar1 = 0x01
   0000 75 86 01            119 	mov     dps, #1
   0003 90s00r00r00         120 	mov     dptr, #___ulong2fs_a_1_1
   0007 E5 82               121 	mov	a,dpl
   0009 F0                  122 	movx	@dptr,a
   000A A3                  123 	inc	dptr
   000B E5 83               124 	mov	a,dph
   000D F0                  125 	movx	@dptr,a
   000E A3                  126 	inc	dptr
   000F E5 93               127 	mov	a,dpx
   0011 F0                  128 	movx	@dptr,a
   0012 A3                  129 	inc	dptr
   0013 E5 F0               130 	mov	a,b
   0015 F0                  131 	movx	@dptr,a
   0016 75 86 00            132 	mov	dps,#0
                            133 ;	_ulong2fs.c:88: if (!a)
   0019 90s00r00r00         134 	mov	dptr,#___ulong2fs_a_1_1
   001D E0                  135 	movx	a,@dptr
   001E F5 F0               136 	mov	b,a
   0020 A3                  137 	inc	dptr
   0021 E0                  138 	movx	a,@dptr
   0022 42 F0               139 	orl	b,a
   0024 A3                  140 	inc	dptr
   0025 E0                  141 	movx	a,@dptr
   0026 42 F0               142 	orl	b,a
   0028 A3                  143 	inc	dptr
   0029 E0                  144 	movx	a,@dptr
   002A 45 F0               145 	orl	a,b
   002C 70 0B               146 	jnz  00115$
   002E                     147 00121$:
                            148 ;	_ulong2fs.c:90: return 0.0;
   002E 90 00 00 00         149 	mov  dptr,#0x0000
   0032 75 F0 00            150 	mov	b,#0x00
   0035 02s00r01r6C         151 	ljmp	00111$
                            152 ;	_ulong2fs.c:93: while (a & NORM) 
   0039                     153 00115$:
                            154 ;	genAssign: resultIsFar = FALSE
   0039 7E 96               155 	mov	r6,#0x96
   003B 7F 00               156 	mov	r7,#0x00
   003D                     157 00103$:
   003D 90s00r00r00         158 	mov	dptr,#___ulong2fs_a_1_1
   0041 A3                  159 	inc	dptr
   0042 A3                  160 	inc	dptr
   0043 A3                  161 	inc	dptr
   0044 E0                  162 	movx	a,@dptr
   0045 60 35               163 	jz  00117$
   0047                     164 00122$:
                            165 ;	_ulong2fs.c:96: a >>= 1;
   0047 90s00r00r00         166 	mov	dptr,#___ulong2fs_a_1_1
   004B A3                  167 	inc	dptr
   004C A3                  168 	inc	dptr
   004D A3                  169 	inc	dptr
   004E E0                  170 	movx	a,@dptr
   004F C3                  171 	clr	c
   0050 13                  172 	rrc	a
   0051 FB                  173 	mov	r3,a
   0052 12s00r00r00         174 	lcall	__decdptr
   0056 E0                  175 	movx	a,@dptr
   0057 13                  176 	rrc	a
   0058 FA                  177 	mov	r2,a
   0059 12s00r00r00         178 	lcall	__decdptr
   005D E0                  179 	movx	a,@dptr
   005E 13                  180 	rrc	a
   005F F9                  181 	mov	r1,a
   0060 12s00r00r00         182 	lcall	__decdptr
   0064 E0                  183 	movx	a,@dptr
   0065 13                  184 	rrc	a
                            185 ;	genAssign: resultIsFar = TRUE
   0066 F8                  186 	mov  r0,a
   0067 90s00r00r00         187 	mov  dptr,#___ulong2fs_a_1_1
   006B F0                  188 	movx @dptr,a
   006C A3                  189 	inc	dptr
   006D E9                  190 	mov	a,r1
   006E F0                  191 	movx	@dptr,a
   006F A3                  192 	inc	dptr
   0070 EA                  193 	mov	a,r2
   0071 F0                  194 	movx	@dptr,a
   0072 A3                  195 	inc	dptr
   0073 EB                  196 	mov	a,r3
   0074 F0                  197 	movx	@dptr,a
                            198 ;	_ulong2fs.c:97: exp++;
   0075 0E                  199 	inc	r6
   0076 BE 00 C4            200 	cjne	r6,#0,00103$
   0079 0F                  201 	inc	r7
                            202 ;	_ulong2fs.c:100: while (a < HIDDEN)
   007A 80 C1               203 	sjmp 00103$
   007C                     204 00117$:
                            205 ;	genAssign: resultIsFar = FALSE
   007C 8E 02               206 	mov	ar2,r6
   007E 8F 03               207 	mov	ar3,r7
   0080                     208 00106$:
   0080 90s00r00r00         209 	mov	dptr,#___ulong2fs_a_1_1
   0084 C3                  210 	clr	c
   0085 E0                  211 	movx	a,@dptr
   0086 94 00               212 	subb	a,#0x00
   0088 A3                  213 	inc	dptr
   0089 E0                  214 	movx	a,@dptr
   008A 94 00               215 	subb	a,#0x00
   008C A3                  216 	inc	dptr
   008D E0                  217 	movx	a,@dptr
   008E 94 80               218 	subb	a,#0x80
   0090 A3                  219 	inc	dptr
   0091 E0                  220 	movx	a,@dptr
   0092 94 00               221 	subb	a,#0x00
   0094 50 3A               222 	jnc  00120$
   0096                     223 00123$:
                            224 ;	_ulong2fs.c:102: a <<= 1;
   0096 75 F0 02            225 	mov	b,#0x02
   0099 90s00r00r00         226 	mov	dptr,#___ulong2fs_a_1_1
   009D E0                  227 	movx	a,@dptr
   009E FC                  228 	mov     r4,a
   009F A3                  229 	inc	dptr
   00A0 E0                  230 	movx	a,@dptr
   00A1 FD                  231 	mov     r5,a
   00A2 A3                  232 	inc	dptr
   00A3 E0                  233 	movx	a,@dptr
   00A4 FE                  234 	mov     r6,a
   00A5 A3                  235 	inc	dptr
   00A6 E0                  236 	movx	a,@dptr
   00A7 FF                  237 	mov     r7,a
   00A8 80 0D               238 	sjmp	00125$
   00AA                     239 00124$:
   00AA EC                  240 	mov	a,r4
   00AB 25 E0               241 	add	a,acc
   00AD FC                  242 	mov	r4,a
   00AE ED                  243 	mov	a,r5
   00AF 33                  244 	rlc	a
   00B0 FD                  245 	mov	r5,a
   00B1 EE                  246 	mov	a,r6
   00B2 33                  247 	rlc	a
   00B3 FE                  248 	mov	r6,a
   00B4 EF                  249 	mov	a,r7
   00B5 33                  250 	rlc	a
   00B6 FF                  251 	mov	r7,a
   00B7                     252 00125$:
   00B7 D5 F0 F0            253 	djnz	b,00124$
                            254 ;	genAssign: resultIsFar = TRUE
   00BA 90s00r00r00         255 	mov	dptr,#___ulong2fs_a_1_1
   00BE EC                  256 	mov	a,r4
   00BF F0                  257 	movx	@dptr,a
   00C0 A3                  258 	inc	dptr
   00C1 ED                  259 	mov	a,r5
   00C2 F0                  260 	movx	@dptr,a
   00C3 A3                  261 	inc	dptr
   00C4 EE                  262 	mov	a,r6
   00C5 F0                  263 	movx	@dptr,a
   00C6 A3                  264 	inc	dptr
   00C7 EF                  265 	mov	a,r7
   00C8 F0                  266 	movx	@dptr,a
                            267 ;	_ulong2fs.c:103: exp--;
   00C9 1A                  268 	dec	r2
   00CA BA FF B3            269 	cjne	r2,#0xFF,00106$
   00CD 1B                  270 	dec	r3
   00CE 80 B0               271 	sjmp 00106$
   00D0                     272 00120$:
                            273 ;	genAssign: resultIsFar = TRUE
   00D0 8A 04               274 	mov	ar4,r2
   00D2 8B 05               275 	mov	ar5,r3
                            276 ;	_ulong2fs.c:107: if ((a&0x7fffff)==0x7fffff) {
   00D4 90s00r00r00         277 	mov	dptr,#___ulong2fs_a_1_1
   00D8 E0                  278 	movx	a,@dptr
   00D9 FE                  279 	mov	r6,a
   00DA A3                  280 	inc	dptr
   00DB E0                  281 	movx	a,@dptr
   00DC FF                  282 	mov	r7,a
   00DD A3                  283 	inc	dptr
   00DE E0                  284 	movx	a,@dptr
   00DF 54 7F               285 	anl	a,#0x7F
   00E1 F8                  286 	mov	r0,a
   00E2 79 00               287 	mov	r1,#0
   00E4 EE                  288 	mov	a,r6
   00E5 B4 FF 1F            289 	cjne a,#0xFF,00110$
   00E8 EF                  290 	mov  a,r7
   00E9 B4 FF 1B            291 	cjne a,#0xFF,00110$
   00EC E8                  292 	mov  a,r0
   00ED B4 7F 17            293 	cjne a,#0x7F,00110$
   00F0 E9                  294 	mov  a,r1
   00F1 B4 00 13            295 	cjne a,#0x00,00110$
   00F4                     296 00127$:
                            297 ;	_ulong2fs.c:108: a=0;
                            298 ;	genAssign: resultIsFar = TRUE
   00F4 90s00r00r00         299 	mov	dptr,#___ulong2fs_a_1_1
   00F8 E4                  300 	clr	a
   00F9 F0                  301 	movx	@dptr,a
   00FA A3                  302 	inc	dptr
   00FB F0                  303 	movx	@dptr,a
   00FC A3                  304 	inc	dptr
   00FD F0                  305 	movx	@dptr,a
   00FE A3                  306 	inc	dptr
   00FF F0                  307 	movx	@dptr,a
                            308 ;	_ulong2fs.c:109: exp++;
   0100 74 01               309 	mov	a,#0x01
   0102 2A                  310 	add	a,r2
   0103 FC                  311 	mov	r4,a
   0104 E4                  312 	clr  a
   0105 3B                  313 	addc	a,r3
   0106 FD                  314 	mov	r5,a
   0107                     315 00110$:
                            316 ;	_ulong2fs.c:113: a &= ~HIDDEN ;
   0107 90s00r00r00         317 	mov	dptr,#___ulong2fs_a_1_1
   010B E0                  318 	movx	a,@dptr
   010C F0                  319 	movx	@dptr,a
   010D A3                  320 	inc	dptr
   010E E0                  321 	movx	a,@dptr
   010F F0                  322 	movx	@dptr,a
   0110 A3                  323 	inc	dptr
   0111 E0                  324 	movx	a,@dptr
   0112 54 7F               325 	anl	a,#0x7F
   0114 F0                  326 	movx	@dptr,a
   0115 A3                  327 	inc	dptr
   0116 E0                  328 	movx	a,@dptr
   0117 F0                  329 	movx	@dptr,a
                            330 ;	_ulong2fs.c:115: fl.l = PACK(0,(unsigned long)exp, a);
   0118 ED                  331 	mov	a,r5
   0119 33                  332 	rlc	a
   011A 95 E0               333 	subb	a,acc
   011C FA                  334 	mov	r2,a
   011D FB                  335 	mov	r3,a
   011E 75 F0 18            336 	mov	b,#0x18
   0121 80 0D               337 	sjmp	00129$
   0123                     338 00128$:
   0123 EC                  339 	mov	a,r4
   0124 25 E0               340 	add	a,acc
   0126 FC                  341 	mov	r4,a
   0127 ED                  342 	mov	a,r5
   0128 33                  343 	rlc	a
   0129 FD                  344 	mov	r5,a
   012A EA                  345 	mov	a,r2
   012B 33                  346 	rlc	a
   012C FA                  347 	mov	r2,a
   012D EB                  348 	mov	a,r3
   012E 33                  349 	rlc	a
   012F FB                  350 	mov	r3,a
   0130                     351 00129$:
   0130 D5 F0 F0            352 	djnz	b,00128$
   0133 90s00r00r00         353 	mov	dptr,#___ulong2fs_a_1_1
   0137 E0                  354 	movx	a,@dptr
   0138 42 04               355 	orl	ar4,a
   013A A3                  356 	inc	dptr
   013B E0                  357 	movx	a,@dptr
   013C 42 05               358 	orl	ar5,a
   013E A3                  359 	inc	dptr
   013F E0                  360 	movx	a,@dptr
   0140 42 02               361 	orl	ar2,a
   0142 A3                  362 	inc	dptr
   0143 E0                  363 	movx	a,@dptr
   0144 42 03               364 	orl	ar3,a
   0146 90s00r00r04         365 	mov	dptr,#___ulong2fs_fl_1_1
   014A EC                  366 	mov	a,r4
   014B F0                  367 	movx	@dptr,a
   014C A3                  368 	inc	dptr
   014D ED                  369 	mov	a,r5
   014E F0                  370 	movx	@dptr,a
   014F A3                  371 	inc	dptr
   0150 EA                  372 	mov	a,r2
   0151 F0                  373 	movx	@dptr,a
   0152 A3                  374 	inc	dptr
   0153 EB                  375 	mov	a,r3
   0154 F0                  376 	movx	@dptr,a
                            377 ;	_ulong2fs.c:117: return (fl.f);
   0155 90s00r00r04         378 	mov	dptr,#___ulong2fs_fl_1_1
   0159 E0                  379 	movx	a,@dptr
   015A A3                  380 	inc	dptr
   015B FA                  381 	mov	r2,a
   015C E0                  382 	movx	a,@dptr
   015D A3                  383 	inc	dptr
   015E FB                  384 	mov	r3,a
   015F E0                  385 	movx	a,@dptr
   0160 A3                  386 	inc	dptr
   0161 FC                  387 	mov	r4,a
   0162 E0                  388 	movx	a,@dptr
   0163 FD                  389 	mov	r5,a
   0164 8A 82               390 	mov	dpl,r2
   0166 8B 83               391 	mov	dph,r3
   0168 8C 93               392 	mov	dpx,r4
   016A 8D F0               393 	mov	b,r5
   016C                     394 00111$:
   016C 22                  395 	ret
                            396 	.area CSEG    (CODE)
                            397 	.area CONST   (CODE)
                            398 	.area XINIT   (CODE)
                            399 	.area CABS    (ABS,CODE)
