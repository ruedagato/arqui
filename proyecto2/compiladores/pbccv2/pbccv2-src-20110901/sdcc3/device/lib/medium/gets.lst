                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.0.1 #6227 (Oct  2 2015) (Linux)
                              4 ; This file was generated Fri Oct  2 17:15:26 2015
                              5 ;--------------------------------------------------------
                              6 	.module gets
                              7 	.optsdcc -mmcs51 --model-medium
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _gets
                             13 ;--------------------------------------------------------
                             14 ; special function registers
                             15 ;--------------------------------------------------------
                             16 	.area RSEG    (ABS,DATA)
   0000                      17 	.org 0x0000
                             18 ;--------------------------------------------------------
                             19 ; special function bits
                             20 ;--------------------------------------------------------
                             21 	.area RSEG    (ABS,DATA)
   0000                      22 	.org 0x0000
                             23 ;--------------------------------------------------------
                             24 ; overlayable register banks
                             25 ;--------------------------------------------------------
                             26 	.area REG_BANK_0	(REL,OVR,DATA)
   0000                      27 	.ds 8
                             28 ;--------------------------------------------------------
                             29 ; internal ram data
                             30 ;--------------------------------------------------------
                             31 	.area DSEG    (DATA)
                             32 ;--------------------------------------------------------
                             33 ; overlayable items in internal ram 
                             34 ;--------------------------------------------------------
                             35 	.area OSEG    (OVR,DATA)
                             36 ;--------------------------------------------------------
                             37 ; indirectly addressable internal ram data
                             38 ;--------------------------------------------------------
                             39 	.area ISEG    (DATA)
                             40 ;--------------------------------------------------------
                             41 ; absolute internal ram data
                             42 ;--------------------------------------------------------
                             43 	.area IABS    (ABS,DATA)
                             44 	.area IABS    (ABS,DATA)
                             45 ;--------------------------------------------------------
                             46 ; bit data
                             47 ;--------------------------------------------------------
                             48 	.area BSEG    (BIT)
                             49 ;--------------------------------------------------------
                             50 ; paged external ram data
                             51 ;--------------------------------------------------------
                             52 	.area PSEG    (PAG,XDATA)
                             53 ;--------------------------------------------------------
                             54 ; external ram data
                             55 ;--------------------------------------------------------
                             56 	.area XSEG    (XDATA)
                             57 ;--------------------------------------------------------
                             58 ; absolute external ram data
                             59 ;--------------------------------------------------------
                             60 	.area XABS    (ABS,XDATA)
                             61 ;--------------------------------------------------------
                             62 ; external initialized ram data
                             63 ;--------------------------------------------------------
                             64 	.area XISEG   (XDATA)
                             65 	.area HOME    (CODE)
                             66 	.area GSINIT0 (CODE)
                             67 	.area GSINIT1 (CODE)
                             68 	.area GSINIT2 (CODE)
                             69 	.area GSINIT3 (CODE)
                             70 	.area GSINIT4 (CODE)
                             71 	.area GSINIT5 (CODE)
                             72 	.area GSINIT  (CODE)
                             73 	.area GSFINAL (CODE)
                             74 	.area CSEG    (CODE)
                             75 ;--------------------------------------------------------
                             76 ; global & static initialisations
                             77 ;--------------------------------------------------------
                             78 	.area HOME    (CODE)
                             79 	.area GSINIT  (CODE)
                             80 	.area GSFINAL (CODE)
                             81 	.area GSINIT  (CODE)
                             82 ;--------------------------------------------------------
                             83 ; Home
                             84 ;--------------------------------------------------------
                             85 	.area HOME    (CODE)
                             86 	.area HOME    (CODE)
                             87 ;--------------------------------------------------------
                             88 ; code
                             89 ;--------------------------------------------------------
                             90 	.area CSEG    (CODE)
                             91 ;------------------------------------------------------------
                             92 ;Allocation info for local variables in function 'gets'
                             93 ;------------------------------------------------------------
                             94 ;------------------------------------------------------------
                             95 ;	gets.c:32: gets (char *s)
                             96 ;	-----------------------------------------
                             97 ;	 function gets
                             98 ;	-----------------------------------------
   0000                      99 _gets:
                    0002    100 	ar2 = 0x02
                    0003    101 	ar3 = 0x03
                    0004    102 	ar4 = 0x04
                    0005    103 	ar5 = 0x05
                    0006    104 	ar6 = 0x06
                    0007    105 	ar7 = 0x07
                    0000    106 	ar0 = 0x00
                    0001    107 	ar1 = 0x01
   0000 AA 82               108 	mov	r2,dpl
   0002 AB 83               109 	mov	r3,dph
   0004 AC F0               110 	mov	r4,b
                            111 ;	gets.c:35: unsigned int count = 0;
   0006 7D 00               112 	mov	r5,#0x00
   0008 7E 00               113 	mov	r6,#0x00
                            114 ;	gets.c:37: while (1)
   000A                     115 00109$:
                            116 ;	gets.c:39: c = getchar ();
   000A C0 02               117 	push	ar2
   000C C0 03               118 	push	ar3
   000E C0 04               119 	push	ar4
   0010 C0 05               120 	push	ar5
   0012 C0 06               121 	push	ar6
   0014 12s00r00            122 	lcall	_getchar
   0017 AF 82               123 	mov	r7,dpl
   0019 D0 06               124 	pop	ar6
   001B D0 05               125 	pop	ar5
   001D D0 04               126 	pop	ar4
   001F D0 03               127 	pop	ar3
   0021 D0 02               128 	pop	ar2
                            129 ;	gets.c:40: switch(c)
   0023 BF 08 02            130 	cjne	r7,#0x08,00118$
   0026 80 0A               131 	sjmp	00101$
   0028                     132 00118$:
   0028 BF 0A 02            133 	cjne	r7,#0x0A,00119$
   002B 80 3B               134 	sjmp	00105$
   002D                     135 00119$:
                            136 ;	gets.c:42: case '\b': /* backspace */
   002D BF 0D 61            137 	cjne	r7,#0x0D,00106$
   0030 80 36               138 	sjmp	00105$
   0032                     139 00101$:
                            140 ;	gets.c:43: if (count)
   0032 ED                  141 	mov	a,r5
   0033 4E                  142 	orl	a,r6
   0034 60 D4               143 	jz	00109$
                            144 ;	gets.c:45: putchar ('\b');
   0036 75 82 08            145 	mov	dpl,#0x08
   0039 C0 02               146 	push	ar2
   003B C0 03               147 	push	ar3
   003D C0 04               148 	push	ar4
   003F C0 05               149 	push	ar5
   0041 C0 06               150 	push	ar6
   0043 12s00r00            151 	lcall	_putchar
                            152 ;	gets.c:46: putchar (' ');
   0046 75 82 20            153 	mov	dpl,#0x20
   0049 12s00r00            154 	lcall	_putchar
                            155 ;	gets.c:47: putchar ('\b');
   004C 75 82 08            156 	mov	dpl,#0x08
   004F 12s00r00            157 	lcall	_putchar
   0052 D0 06               158 	pop	ar6
   0054 D0 05               159 	pop	ar5
   0056 D0 04               160 	pop	ar4
   0058 D0 03               161 	pop	ar3
   005A D0 02               162 	pop	ar2
                            163 ;	gets.c:48: --s;
   005C 1A                  164 	dec	r2
   005D BA FF 01            165 	cjne	r2,#0xff,00122$
   0060 1B                  166 	dec	r3
   0061                     167 00122$:
                            168 ;	gets.c:49: --count;
   0061 1D                  169 	dec	r5
   0062 BD FF 01            170 	cjne	r5,#0xff,00123$
   0065 1E                  171 	dec	r6
   0066                     172 00123$:
                            173 ;	gets.c:51: break;
                            174 ;	gets.c:54: case '\r': /* CR or LF */
   0066 80 A2               175 	sjmp	00109$
   0068                     176 00105$:
                            177 ;	gets.c:55: putchar ('\r');
   0068 75 82 0D            178 	mov	dpl,#0x0D
   006B C0 02               179 	push	ar2
   006D C0 03               180 	push	ar3
   006F C0 04               181 	push	ar4
   0071 12s00r00            182 	lcall	_putchar
                            183 ;	gets.c:56: putchar ('\n');
   0074 75 82 0A            184 	mov	dpl,#0x0A
   0077 12s00r00            185 	lcall	_putchar
   007A D0 04               186 	pop	ar4
   007C D0 03               187 	pop	ar3
   007E D0 02               188 	pop	ar2
                            189 ;	gets.c:57: *s = 0;
   0080 8A 82               190 	mov	dpl,r2
   0082 8B 83               191 	mov	dph,r3
   0084 8C F0               192 	mov	b,r4
   0086 E4                  193 	clr	a
   0087 12s00r00            194 	lcall	__gptrput
                            195 ;	gets.c:58: return s;
   008A 8A 82               196 	mov	dpl,r2
   008C 8B 83               197 	mov	dph,r3
   008E 8C F0               198 	mov	b,r4
                            199 ;	gets.c:60: default:
   0090 22                  200 	ret
   0091                     201 00106$:
                            202 ;	gets.c:61: *s++ = c;
   0091 8A 82               203 	mov	dpl,r2
   0093 8B 83               204 	mov	dph,r3
   0095 8C F0               205 	mov	b,r4
   0097 EF                  206 	mov	a,r7
   0098 12s00r00            207 	lcall	__gptrput
   009B A3                  208 	inc	dptr
   009C AA 82               209 	mov	r2,dpl
   009E AB 83               210 	mov	r3,dph
                            211 ;	gets.c:62: ++count;
   00A0 0D                  212 	inc	r5
   00A1 BD 00 01            213 	cjne	r5,#0x00,00124$
   00A4 0E                  214 	inc	r6
   00A5                     215 00124$:
                            216 ;	gets.c:63: putchar (c);
   00A5 8F 82               217 	mov	dpl,r7
   00A7 C0 02               218 	push	ar2
   00A9 C0 03               219 	push	ar3
   00AB C0 04               220 	push	ar4
   00AD C0 05               221 	push	ar5
   00AF C0 06               222 	push	ar6
   00B1 12s00r00            223 	lcall	_putchar
   00B4 D0 06               224 	pop	ar6
   00B6 D0 05               225 	pop	ar5
   00B8 D0 04               226 	pop	ar4
   00BA D0 03               227 	pop	ar3
   00BC D0 02               228 	pop	ar2
                            229 ;	gets.c:65: }
   00BE 02s00r0A            230 	ljmp	00109$
                            231 	.area CSEG    (CODE)
                            232 	.area CONST   (CODE)
                            233 	.area XINIT   (CODE)
                            234 	.area CABS    (ABS,CODE)
