                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.0.1 #6227 (Oct  2 2015) (Linux)
                              4 ; This file was generated Fri Oct  2 17:15:29 2015
                              5 ;--------------------------------------------------------
                              6 	.module _strncpy
                              7 	.optsdcc -mmcs51 --model-large
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _strncpy_PARM_3
                             13 	.globl _strncpy_PARM_2
                             14 	.globl _strncpy
                             15 ;--------------------------------------------------------
                             16 ; special function registers
                             17 ;--------------------------------------------------------
                             18 	.area RSEG    (ABS,DATA)
   0000                      19 	.org 0x0000
                             20 ;--------------------------------------------------------
                             21 ; special function bits
                             22 ;--------------------------------------------------------
                             23 	.area RSEG    (ABS,DATA)
   0000                      24 	.org 0x0000
                             25 ;--------------------------------------------------------
                             26 ; overlayable register banks
                             27 ;--------------------------------------------------------
                             28 	.area REG_BANK_0	(REL,OVR,DATA)
   0000                      29 	.ds 8
                             30 ;--------------------------------------------------------
                             31 ; internal ram data
                             32 ;--------------------------------------------------------
                             33 	.area DSEG    (DATA)
                             34 ;--------------------------------------------------------
                             35 ; overlayable items in internal ram 
                             36 ;--------------------------------------------------------
                             37 	.area	OSEG    (OVR,DATA)
   0000                      38 _strncpy_sloc0_1_0::
   0000                      39 	.ds 1
                             40 ;--------------------------------------------------------
                             41 ; indirectly addressable internal ram data
                             42 ;--------------------------------------------------------
                             43 	.area ISEG    (DATA)
                             44 ;--------------------------------------------------------
                             45 ; absolute internal ram data
                             46 ;--------------------------------------------------------
                             47 	.area IABS    (ABS,DATA)
                             48 	.area IABS    (ABS,DATA)
                             49 ;--------------------------------------------------------
                             50 ; bit data
                             51 ;--------------------------------------------------------
                             52 	.area BSEG    (BIT)
                             53 ;--------------------------------------------------------
                             54 ; paged external ram data
                             55 ;--------------------------------------------------------
                             56 	.area PSEG    (PAG,XDATA)
                             57 ;--------------------------------------------------------
                             58 ; external ram data
                             59 ;--------------------------------------------------------
                             60 	.area XSEG    (XDATA)
   0000                      61 _strncpy_PARM_2:
   0000                      62 	.ds 3
   0003                      63 _strncpy_PARM_3:
   0003                      64 	.ds 2
   0005                      65 _strncpy_d_1_1:
   0005                      66 	.ds 3
   0008                      67 _strncpy_d1_1_1:
   0008                      68 	.ds 3
                             69 ;--------------------------------------------------------
                             70 ; absolute external ram data
                             71 ;--------------------------------------------------------
                             72 	.area XABS    (ABS,XDATA)
                             73 ;--------------------------------------------------------
                             74 ; external initialized ram data
                             75 ;--------------------------------------------------------
                             76 	.area XISEG   (XDATA)
                             77 	.area HOME    (CODE)
                             78 	.area GSINIT0 (CODE)
                             79 	.area GSINIT1 (CODE)
                             80 	.area GSINIT2 (CODE)
                             81 	.area GSINIT3 (CODE)
                             82 	.area GSINIT4 (CODE)
                             83 	.area GSINIT5 (CODE)
                             84 	.area GSINIT  (CODE)
                             85 	.area GSFINAL (CODE)
                             86 	.area CSEG    (CODE)
                             87 ;--------------------------------------------------------
                             88 ; global & static initialisations
                             89 ;--------------------------------------------------------
                             90 	.area HOME    (CODE)
                             91 	.area GSINIT  (CODE)
                             92 	.area GSFINAL (CODE)
                             93 	.area GSINIT  (CODE)
                             94 ;--------------------------------------------------------
                             95 ; Home
                             96 ;--------------------------------------------------------
                             97 	.area HOME    (CODE)
                             98 	.area HOME    (CODE)
                             99 ;--------------------------------------------------------
                            100 ; code
                            101 ;--------------------------------------------------------
                            102 	.area CSEG    (CODE)
                            103 ;------------------------------------------------------------
                            104 ;Allocation info for local variables in function 'strncpy'
                            105 ;------------------------------------------------------------
                            106 ;s                         Allocated with name '_strncpy_PARM_2'
                            107 ;n                         Allocated with name '_strncpy_PARM_3'
                            108 ;d                         Allocated with name '_strncpy_d_1_1'
                            109 ;d1                        Allocated with name '_strncpy_d1_1_1'
                            110 ;sloc0                     Allocated with name '_strncpy_sloc0_1_0'
                            111 ;------------------------------------------------------------
                            112 ;	_strncpy.c:31: char *strncpy (
                            113 ;	-----------------------------------------
                            114 ;	 function strncpy
                            115 ;	-----------------------------------------
   0000                     116 _strncpy:
                    0002    117 	ar2 = 0x02
                    0003    118 	ar3 = 0x03
                    0004    119 	ar4 = 0x04
                    0005    120 	ar5 = 0x05
                    0006    121 	ar6 = 0x06
                    0007    122 	ar7 = 0x07
                    0000    123 	ar0 = 0x00
                    0001    124 	ar1 = 0x01
   0000 AA F0               125 	mov	r2,b
   0002 AB 83               126 	mov	r3,dph
   0004 E5 82               127 	mov	a,dpl
   0006 90s00r05            128 	mov	dptr,#_strncpy_d_1_1
   0009 F0                  129 	movx	@dptr,a
   000A A3                  130 	inc	dptr
   000B EB                  131 	mov	a,r3
   000C F0                  132 	movx	@dptr,a
   000D A3                  133 	inc	dptr
   000E EA                  134 	mov	a,r2
   000F F0                  135 	movx	@dptr,a
                            136 ;	_strncpy.c:36: register char * d1 =  d;
   0010 90s00r05            137 	mov	dptr,#_strncpy_d_1_1
   0013 E0                  138 	movx	a,@dptr
   0014 FA                  139 	mov	r2,a
   0015 A3                  140 	inc	dptr
   0016 E0                  141 	movx	a,@dptr
   0017 FB                  142 	mov	r3,a
   0018 A3                  143 	inc	dptr
   0019 E0                  144 	movx	a,@dptr
   001A FC                  145 	mov	r4,a
   001B 90s00r08            146 	mov	dptr,#_strncpy_d1_1_1
   001E EA                  147 	mov	a,r2
   001F F0                  148 	movx	@dptr,a
   0020 A3                  149 	inc	dptr
   0021 EB                  150 	mov	a,r3
   0022 F0                  151 	movx	@dptr,a
   0023 A3                  152 	inc	dptr
   0024 EC                  153 	mov	a,r4
   0025 F0                  154 	movx	@dptr,a
                            155 ;	_strncpy.c:38: while ( n && *s )
   0026 90s00r03            156 	mov	dptr,#_strncpy_PARM_3
   0029 E0                  157 	movx	a,@dptr
   002A FD                  158 	mov	r5,a
   002B A3                  159 	inc	dptr
   002C E0                  160 	movx	a,@dptr
   002D FE                  161 	mov	r6,a
   002E 90s00r00            162 	mov	dptr,#_strncpy_PARM_2
   0031 E0                  163 	movx	a,@dptr
   0032 FF                  164 	mov	r7,a
   0033 A3                  165 	inc	dptr
   0034 E0                  166 	movx	a,@dptr
   0035 F8                  167 	mov	r0,a
   0036 A3                  168 	inc	dptr
   0037 E0                  169 	movx	a,@dptr
   0038 F9                  170 	mov	r1,a
   0039                     171 00102$:
   0039 ED                  172 	mov	a,r5
   003A 4E                  173 	orl	a,r6
   003B 60 34               174 	jz	00115$
   003D 8F 82               175 	mov	dpl,r7
   003F 88 83               176 	mov	dph,r0
   0041 89 F0               177 	mov	b,r1
   0043 12s00r00            178 	lcall	__gptrget
   0046 F5*00               179 	mov	_strncpy_sloc0_1_0,a
   0048 60 27               180 	jz	00115$
                            181 ;	_strncpy.c:40: n-- ;
   004A 1D                  182 	dec	r5
   004B BD FF 01            183 	cjne	r5,#0xff,00119$
   004E 1E                  184 	dec	r6
   004F                     185 00119$:
                            186 ;	_strncpy.c:41: *d++ = *s++ ;
   004F 0F                  187 	inc	r7
   0050 BF 00 01            188 	cjne	r7,#0x00,00120$
   0053 08                  189 	inc	r0
   0054                     190 00120$:
   0054 8A 82               191 	mov	dpl,r2
   0056 8B 83               192 	mov	dph,r3
   0058 8C F0               193 	mov	b,r4
   005A E5*00               194 	mov	a,_strncpy_sloc0_1_0
   005C 12s00r00            195 	lcall	__gptrput
   005F A3                  196 	inc	dptr
   0060 AA 82               197 	mov	r2,dpl
   0062 AB 83               198 	mov	r3,dph
   0064 90s00r05            199 	mov	dptr,#_strncpy_d_1_1
   0067 EA                  200 	mov	a,r2
   0068 F0                  201 	movx	@dptr,a
   0069 A3                  202 	inc	dptr
   006A EB                  203 	mov	a,r3
   006B F0                  204 	movx	@dptr,a
   006C A3                  205 	inc	dptr
   006D EC                  206 	mov	a,r4
   006E F0                  207 	movx	@dptr,a
                            208 ;	_strncpy.c:43: while ( n-- )
   006F 80 C8               209 	sjmp	00102$
   0071                     210 00115$:
   0071 90s00r05            211 	mov	dptr,#_strncpy_d_1_1
   0074 EA                  212 	mov	a,r2
   0075 F0                  213 	movx	@dptr,a
   0076 A3                  214 	inc	dptr
   0077 EB                  215 	mov	a,r3
   0078 F0                  216 	movx	@dptr,a
   0079 A3                  217 	inc	dptr
   007A EC                  218 	mov	a,r4
   007B F0                  219 	movx	@dptr,a
   007C                     220 00105$:
   007C 8D 07               221 	mov	ar7,r5
   007E 8E 00               222 	mov	ar0,r6
   0080 1D                  223 	dec	r5
   0081 BD FF 01            224 	cjne	r5,#0xff,00121$
   0084 1E                  225 	dec	r6
   0085                     226 00121$:
   0085 EF                  227 	mov	a,r7
   0086 48                  228 	orl	a,r0
   0087 60 1C               229 	jz	00116$
                            230 ;	_strncpy.c:45: *d++ = '\0' ;
   0089 8A 82               231 	mov	dpl,r2
   008B 8B 83               232 	mov	dph,r3
   008D 8C F0               233 	mov	b,r4
   008F E4                  234 	clr	a
   0090 12s00r00            235 	lcall	__gptrput
   0093 A3                  236 	inc	dptr
   0094 AA 82               237 	mov	r2,dpl
   0096 AB 83               238 	mov	r3,dph
   0098 90s00r05            239 	mov	dptr,#_strncpy_d_1_1
   009B EA                  240 	mov	a,r2
   009C F0                  241 	movx	@dptr,a
   009D A3                  242 	inc	dptr
   009E EB                  243 	mov	a,r3
   009F F0                  244 	movx	@dptr,a
   00A0 A3                  245 	inc	dptr
   00A1 EC                  246 	mov	a,r4
   00A2 F0                  247 	movx	@dptr,a
   00A3 80 D7               248 	sjmp	00105$
   00A5                     249 00116$:
   00A5 90s00r05            250 	mov	dptr,#_strncpy_d_1_1
   00A8 EA                  251 	mov	a,r2
   00A9 F0                  252 	movx	@dptr,a
   00AA A3                  253 	inc	dptr
   00AB EB                  254 	mov	a,r3
   00AC F0                  255 	movx	@dptr,a
   00AD A3                  256 	inc	dptr
   00AE EC                  257 	mov	a,r4
   00AF F0                  258 	movx	@dptr,a
                            259 ;	_strncpy.c:47: return d1;
   00B0 90s00r08            260 	mov	dptr,#_strncpy_d1_1_1
   00B3 E0                  261 	movx	a,@dptr
   00B4 FA                  262 	mov	r2,a
   00B5 A3                  263 	inc	dptr
   00B6 E0                  264 	movx	a,@dptr
   00B7 FB                  265 	mov	r3,a
   00B8 A3                  266 	inc	dptr
   00B9 E0                  267 	movx	a,@dptr
   00BA FC                  268 	mov	r4,a
   00BB 8A 82               269 	mov	dpl,r2
   00BD 8B 83               270 	mov	dph,r3
   00BF 8C F0               271 	mov	b,r4
   00C1 22                  272 	ret
                            273 	.area CSEG    (CODE)
                            274 	.area CONST   (CODE)
                            275 	.area XINIT   (CODE)
                            276 	.area CABS    (ABS,CODE)
