                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.0.1 #6227 (Oct  2 2015) (Linux)
                              4 ; This file was generated Fri Oct  2 17:15:28 2015
                              5 ;--------------------------------------------------------
                              6 	.module _atoi
                              7 	.optsdcc -mmcs51 --model-large
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _atoi
                             13 ;--------------------------------------------------------
                             14 ; special function registers
                             15 ;--------------------------------------------------------
                             16 	.area RSEG    (ABS,DATA)
   0000                      17 	.org 0x0000
                             18 ;--------------------------------------------------------
                             19 ; special function bits
                             20 ;--------------------------------------------------------
                             21 	.area RSEG    (ABS,DATA)
   0000                      22 	.org 0x0000
                             23 ;--------------------------------------------------------
                             24 ; overlayable register banks
                             25 ;--------------------------------------------------------
                             26 	.area REG_BANK_0	(REL,OVR,DATA)
   0000                      27 	.ds 8
                             28 ;--------------------------------------------------------
                             29 ; internal ram data
                             30 ;--------------------------------------------------------
                             31 	.area DSEG    (DATA)
   0000                      32 _atoi_sloc0_1_0:
   0000                      33 	.ds 2
                             34 ;--------------------------------------------------------
                             35 ; overlayable items in internal ram 
                             36 ;--------------------------------------------------------
                             37 	.area OSEG    (OVR,DATA)
                             38 ;--------------------------------------------------------
                             39 ; indirectly addressable internal ram data
                             40 ;--------------------------------------------------------
                             41 	.area ISEG    (DATA)
                             42 ;--------------------------------------------------------
                             43 ; absolute internal ram data
                             44 ;--------------------------------------------------------
                             45 	.area IABS    (ABS,DATA)
                             46 	.area IABS    (ABS,DATA)
                             47 ;--------------------------------------------------------
                             48 ; bit data
                             49 ;--------------------------------------------------------
                             50 	.area BSEG    (BIT)
                             51 ;--------------------------------------------------------
                             52 ; paged external ram data
                             53 ;--------------------------------------------------------
                             54 	.area PSEG    (PAG,XDATA)
                             55 ;--------------------------------------------------------
                             56 ; external ram data
                             57 ;--------------------------------------------------------
                             58 	.area XSEG    (XDATA)
   0000                      59 _atoi_s_1_1:
   0000                      60 	.ds 3
                             61 ;--------------------------------------------------------
                             62 ; absolute external ram data
                             63 ;--------------------------------------------------------
                             64 	.area XABS    (ABS,XDATA)
                             65 ;--------------------------------------------------------
                             66 ; external initialized ram data
                             67 ;--------------------------------------------------------
                             68 	.area XISEG   (XDATA)
                             69 	.area HOME    (CODE)
                             70 	.area GSINIT0 (CODE)
                             71 	.area GSINIT1 (CODE)
                             72 	.area GSINIT2 (CODE)
                             73 	.area GSINIT3 (CODE)
                             74 	.area GSINIT4 (CODE)
                             75 	.area GSINIT5 (CODE)
                             76 	.area GSINIT  (CODE)
                             77 	.area GSFINAL (CODE)
                             78 	.area CSEG    (CODE)
                             79 ;--------------------------------------------------------
                             80 ; global & static initialisations
                             81 ;--------------------------------------------------------
                             82 	.area HOME    (CODE)
                             83 	.area GSINIT  (CODE)
                             84 	.area GSFINAL (CODE)
                             85 	.area GSINIT  (CODE)
                             86 ;--------------------------------------------------------
                             87 ; Home
                             88 ;--------------------------------------------------------
                             89 	.area HOME    (CODE)
                             90 	.area HOME    (CODE)
                             91 ;--------------------------------------------------------
                             92 ; code
                             93 ;--------------------------------------------------------
                             94 	.area CSEG    (CODE)
                             95 ;------------------------------------------------------------
                             96 ;Allocation info for local variables in function 'atoi'
                             97 ;------------------------------------------------------------
                             98 ;rv                        Allocated to registers r2 r3 
                             99 ;sign                      Allocated to registers r6 
                            100 ;sloc0                     Allocated with name '_atoi_sloc0_1_0'
                            101 ;s                         Allocated with name '_atoi_s_1_1'
                            102 ;------------------------------------------------------------
                            103 ;	_atoi.c:29: int atoi(const char * s)
                            104 ;	-----------------------------------------
                            105 ;	 function atoi
                            106 ;	-----------------------------------------
   0000                     107 _atoi:
                    0002    108 	ar2 = 0x02
                    0003    109 	ar3 = 0x03
                    0004    110 	ar4 = 0x04
                    0005    111 	ar5 = 0x05
                    0006    112 	ar6 = 0x06
                    0007    113 	ar7 = 0x07
                    0000    114 	ar0 = 0x00
                    0001    115 	ar1 = 0x01
   0000 AA F0               116 	mov	r2,b
   0002 AB 83               117 	mov	r3,dph
   0004 E5 82               118 	mov	a,dpl
   0006 90s00r00            119 	mov	dptr,#_atoi_s_1_1
   0009 F0                  120 	movx	@dptr,a
   000A A3                  121 	inc	dptr
   000B EB                  122 	mov	a,r3
   000C F0                  123 	movx	@dptr,a
   000D A3                  124 	inc	dptr
   000E EA                  125 	mov	a,r2
   000F F0                  126 	movx	@dptr,a
                            127 ;	_atoi.c:31: register int rv=0; 
   0010 7A 00               128 	mov	r2,#0x00
   0012 7B 00               129 	mov	r3,#0x00
                            130 ;	_atoi.c:35: while (*s) {
   0014 90s00r00            131 	mov	dptr,#_atoi_s_1_1
   0017 E0                  132 	movx	a,@dptr
   0018 FC                  133 	mov	r4,a
   0019 A3                  134 	inc	dptr
   001A E0                  135 	movx	a,@dptr
   001B FD                  136 	mov	r5,a
   001C A3                  137 	inc	dptr
   001D E0                  138 	movx	a,@dptr
   001E FE                  139 	mov	r6,a
   001F                     140 00107$:
   001F 8C 82               141 	mov	dpl,r4
   0021 8D 83               142 	mov	dph,r5
   0023 8E F0               143 	mov	b,r6
   0025 12s00r00            144 	lcall	__gptrget
   0028 FF                  145 	mov	r7,a
   0029 60 39               146 	jz	00133$
                            147 ;	_atoi.c:36: if (*s <= '9' && *s >= '0')
   002B C3                  148 	clr	c
   002C 74 B9               149 	mov	a,#(0x39 ^ 0x80)
   002E 8F F0               150 	mov	b,r7
   0030 63 F0 80            151 	xrl	b,#0x80
   0033 95 F0               152 	subb	a,b
   0035 40 07               153 	jc	00102$
   0037 EF                  154 	mov	a,r7
   0038 64 80               155 	xrl	a,#0x80
   003A 94 B0               156 	subb	a,#0xb0
   003C 50 26               157 	jnc	00133$
                            158 ;	_atoi.c:37: break;
   003E                     159 00102$:
                            160 ;	_atoi.c:38: if (*s == '-' || *s == '+') 
   003E 8C 82               161 	mov	dpl,r4
   0040 8D 83               162 	mov	dph,r5
   0042 8E F0               163 	mov	b,r6
   0044 12s00r00            164 	lcall	__gptrget
   0047 FF                  165 	mov	r7,a
   0048 BF 2D 02            166 	cjne	r7,#0x2D,00138$
   004B 80 17               167 	sjmp	00133$
   004D                     168 00138$:
   004D BF 2B 02            169 	cjne	r7,#0x2B,00139$
   0050 80 12               170 	sjmp	00133$
   0052                     171 00139$:
                            172 ;	_atoi.c:40: s++;
   0052 0C                  173 	inc	r4
   0053 BC 00 01            174 	cjne	r4,#0x00,00140$
   0056 0D                  175 	inc	r5
   0057                     176 00140$:
   0057 90s00r00            177 	mov	dptr,#_atoi_s_1_1
   005A EC                  178 	mov	a,r4
   005B F0                  179 	movx	@dptr,a
   005C A3                  180 	inc	dptr
   005D ED                  181 	mov	a,r5
   005E F0                  182 	movx	@dptr,a
   005F A3                  183 	inc	dptr
   0060 EE                  184 	mov	a,r6
   0061 F0                  185 	movx	@dptr,a
   0062 80 BB               186 	sjmp	00107$
   0064                     187 00133$:
   0064 90s00r00            188 	mov	dptr,#_atoi_s_1_1
   0067 EC                  189 	mov	a,r4
   0068 F0                  190 	movx	@dptr,a
   0069 A3                  191 	inc	dptr
   006A ED                  192 	mov	a,r5
   006B F0                  193 	movx	@dptr,a
   006C A3                  194 	inc	dptr
   006D EE                  195 	mov	a,r6
   006E F0                  196 	movx	@dptr,a
                            197 ;	_atoi.c:43: sign = (*s == '-');
   006F 8C 07               198 	mov	ar7,r4
   0071 8D 00               199 	mov	ar0,r5
   0073 8E 01               200 	mov	ar1,r6
   0075 8C 82               201 	mov	dpl,r4
   0077 8D 83               202 	mov	dph,r5
   0079 8E F0               203 	mov	b,r6
   007B 12s00r00            204 	lcall	__gptrget
   007E FC                  205 	mov	r4,a
   007F E4                  206 	clr	a
   0080 BC 2D 01            207 	cjne	r4,#0x2D,00141$
   0083 04                  208 	inc	a
   0084                     209 00141$:
                            210 ;	_atoi.c:44: if (*s == '-' || *s == '+') s++;
   0084 FD                  211 	mov	r5,a
   0085 FE                  212 	mov	r6,a
   0086 70 03               213 	jnz	00110$
   0088 BC 2B 0E            214 	cjne	r4,#0x2B,00131$
   008B                     215 00110$:
   008B 90s00r00            216 	mov	dptr,#_atoi_s_1_1
   008E 74 01               217 	mov	a,#0x01
   0090 2F                  218 	add	a,r7
   0091 F0                  219 	movx	@dptr,a
   0092 E4                  220 	clr	a
   0093 38                  221 	addc	a,r0
   0094 A3                  222 	inc	dptr
   0095 F0                  223 	movx	@dptr,a
   0096 A3                  224 	inc	dptr
   0097 E9                  225 	mov	a,r1
   0098 F0                  226 	movx	@dptr,a
                            227 ;	_atoi.c:46: while (*s && *s >= '0' && *s <= '9') {
   0099                     228 00131$:
   0099 90s00r00            229 	mov	dptr,#_atoi_s_1_1
   009C E0                  230 	movx	a,@dptr
   009D FC                  231 	mov	r4,a
   009E A3                  232 	inc	dptr
   009F E0                  233 	movx	a,@dptr
   00A0 FD                  234 	mov	r5,a
   00A1 A3                  235 	inc	dptr
   00A2 E0                  236 	movx	a,@dptr
   00A3 FF                  237 	mov	r7,a
   00A4                     238 00115$:
   00A4 8C 82               239 	mov	dpl,r4
   00A6 8D 83               240 	mov	dph,r5
   00A8 8F F0               241 	mov	b,r7
   00AA 12s00r00            242 	lcall	__gptrget
   00AD F8                  243 	mov	r0,a
   00AE 60 66               244 	jz	00134$
   00B0 C3                  245 	clr	c
   00B1 E8                  246 	mov	a,r0
   00B2 64 80               247 	xrl	a,#0x80
   00B4 94 B0               248 	subb	a,#0xb0
   00B6 40 5E               249 	jc	00134$
   00B8 74 B9               250 	mov	a,#(0x39 ^ 0x80)
   00BA 88 F0               251 	mov	b,r0
   00BC 63 F0 80            252 	xrl	b,#0x80
   00BF 95 F0               253 	subb	a,b
   00C1 40 53               254 	jc	00134$
                            255 ;	_atoi.c:47: rv = (rv * 10) + (*s - '0');
   00C3 C0 06               256 	push	ar6
   00C5 90s00r00            257 	mov	dptr,#__mulint_PARM_2
   00C8 EA                  258 	mov	a,r2
   00C9 F0                  259 	movx	@dptr,a
   00CA A3                  260 	inc	dptr
   00CB EB                  261 	mov	a,r3
   00CC F0                  262 	movx	@dptr,a
   00CD 90 00 0A            263 	mov	dptr,#0x000A
   00D0 C0 04               264 	push	ar4
   00D2 C0 05               265 	push	ar5
   00D4 C0 06               266 	push	ar6
   00D6 C0 07               267 	push	ar7
   00D8 C0 00               268 	push	ar0
   00DA 12s00r00            269 	lcall	__mulint
   00DD 85 82*00            270 	mov	_atoi_sloc0_1_0,dpl
   00E0 85 83*01            271 	mov	(_atoi_sloc0_1_0 + 1),dph
   00E3 D0 00               272 	pop	ar0
   00E5 D0 07               273 	pop	ar7
   00E7 D0 06               274 	pop	ar6
   00E9 D0 05               275 	pop	ar5
   00EB D0 04               276 	pop	ar4
   00ED E8                  277 	mov	a,r0
   00EE 33                  278 	rlc	a
   00EF 95 E0               279 	subb	a,acc
   00F1 FE                  280 	mov	r6,a
   00F2 E8                  281 	mov	a,r0
   00F3 24 D0               282 	add	a,#0xd0
   00F5 F8                  283 	mov	r0,a
   00F6 EE                  284 	mov	a,r6
   00F7 34 FF               285 	addc	a,#0xff
   00F9 FE                  286 	mov	r6,a
   00FA E8                  287 	mov	a,r0
   00FB 25*00               288 	add	a,_atoi_sloc0_1_0
   00FD FA                  289 	mov	r2,a
   00FE EE                  290 	mov	a,r6
   00FF 35*01               291 	addc	a,(_atoi_sloc0_1_0 + 1)
   0101 FB                  292 	mov	r3,a
                            293 ;	_atoi.c:48: s++;
   0102 0C                  294 	inc	r4
   0103 BC 00 01            295 	cjne	r4,#0x00,00149$
   0106 0D                  296 	inc	r5
   0107                     297 00149$:
   0107 90s00r00            298 	mov	dptr,#_atoi_s_1_1
   010A EC                  299 	mov	a,r4
   010B F0                  300 	movx	@dptr,a
   010C A3                  301 	inc	dptr
   010D ED                  302 	mov	a,r5
   010E F0                  303 	movx	@dptr,a
   010F A3                  304 	inc	dptr
   0110 EF                  305 	mov	a,r7
   0111 F0                  306 	movx	@dptr,a
   0112 D0 06               307 	pop	ar6
   0114 80 8E               308 	sjmp	00115$
   0116                     309 00134$:
   0116 90s00r00            310 	mov	dptr,#_atoi_s_1_1
   0119 EC                  311 	mov	a,r4
   011A F0                  312 	movx	@dptr,a
   011B A3                  313 	inc	dptr
   011C ED                  314 	mov	a,r5
   011D F0                  315 	movx	@dptr,a
   011E A3                  316 	inc	dptr
   011F EF                  317 	mov	a,r7
   0120 F0                  318 	movx	@dptr,a
                            319 ;	_atoi.c:51: return (sign ? -rv : rv);
   0121 EE                  320 	mov	a,r6
   0122 60 09               321 	jz	00120$
   0124 C3                  322 	clr	c
   0125 E4                  323 	clr	a
   0126 9A                  324 	subb	a,r2
   0127 FC                  325 	mov	r4,a
   0128 E4                  326 	clr	a
   0129 9B                  327 	subb	a,r3
   012A FD                  328 	mov	r5,a
   012B 80 04               329 	sjmp	00121$
   012D                     330 00120$:
   012D 8A 04               331 	mov	ar4,r2
   012F 8B 05               332 	mov	ar5,r3
   0131                     333 00121$:
   0131 8C 82               334 	mov	dpl,r4
   0133 8D 83               335 	mov	dph,r5
   0135 22                  336 	ret
                            337 	.area CSEG    (CODE)
                            338 	.area CONST   (CODE)
                            339 	.area XINIT   (CODE)
                            340 	.area CABS    (ABS,CODE)
