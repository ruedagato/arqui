                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.0.1 #6227 (Oct  2 2015) (Linux)
                              4 ; This file was generated Fri Oct  2 17:18:17 2015
                              5 ;--------------------------------------------------------
                              6 	.module _atoi
                              7 	.optsdcc -mz80
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _atoi
                             13 ;--------------------------------------------------------
                             14 ; special function registers
                             15 ;--------------------------------------------------------
                             16 ;--------------------------------------------------------
                             17 ;  ram data
                             18 ;--------------------------------------------------------
                             19 	.area _DATA
                             20 ;--------------------------------------------------------
                             21 ; overlayable items in  ram 
                             22 ;--------------------------------------------------------
                             23 	.area _OVERLAY
                             24 ;--------------------------------------------------------
                             25 ; external initialized ram data
                             26 ;--------------------------------------------------------
                             27 ;--------------------------------------------------------
                             28 ; global & static initialisations
                             29 ;--------------------------------------------------------
                             30 	.area _HOME
                             31 	.area _GSINIT
                             32 	.area _GSFINAL
                             33 	.area _GSINIT
                             34 ;--------------------------------------------------------
                             35 ; Home
                             36 ;--------------------------------------------------------
                             37 	.area _HOME
                             38 	.area _HOME
                             39 ;--------------------------------------------------------
                             40 ; code
                             41 ;--------------------------------------------------------
                             42 	.area _CODE
                             43 ;../_atoi.c:29: int atoi(const char * s)
                             44 ;	---------------------------------
                             45 ; Function atoi
                             46 ; ---------------------------------
   0000                      47 _atoi_start::
   0000                      48 _atoi:
   0000 DD E5                49 	push	ix
   0002 DD 21 00 00          50 	ld	ix,#0
   0006 DD 39                51 	add	ix,sp
   0008 F5                   52 	push	af
   0009 F5                   53 	push	af
                             54 ;../_atoi.c:31: register int rv=0; 
   000A DD 36 FE 00          55 	ld	-2 (ix),#0x00
   000E DD 36 FF 00          56 	ld	-1 (ix),#0x00
                             57 ;../_atoi.c:35: while (*s) {
   0012 DD 5E 04             58 	ld	e,4 (ix)
   0015 DD 56 05             59 	ld	d,5 (ix)
   0018                      60 00107$:
   0018 1A                   61 	ld	a,(de)
   0019 6F                   62 	ld	l,a
   001A B7                   63 	or	a,a
   001B 28 24                64 	jr	Z,00133$
                             65 ;../_atoi.c:36: if (*s <= '9' && *s >= '0')
   001D 3E 39                66 	ld	a,#0x39
   001F 95                   67 	sub	a, l
   0020 E2r25s00             68 	jp	PO, 00135$
   0023 EE 80                69 	xor	a, #0x80
   0025                      70 00135$:
   0025 FAr33s00             71 	jp	M,00102$
   0028 7D                   72 	ld	a,l
   0029 D6 30                73 	sub	a, #0x30
   002B E2r30s00             74 	jp	PO, 00136$
   002E EE 80                75 	xor	a, #0x80
   0030                      76 00136$:
   0030 F2r41s00             77 	jp	P,00133$
                             78 ;../_atoi.c:37: break;
   0033                      79 00102$:
                             80 ;../_atoi.c:38: if (*s == '-' || *s == '+') 
   0033 1A                   81 	ld	a,(de)
   0034 6F                   82 	ld	l,a
   0035 D6 2D                83 	sub	a,#0x2D
   0037 28 08                84 	jr	Z,00133$
   0039 7D                   85 	ld	a,l
   003A D6 2B                86 	sub	a,#0x2B
   003C 28 03                87 	jr	Z,00133$
                             88 ;../_atoi.c:40: s++;
   003E 13                   89 	inc	de
   003F 18 D7                90 	jr	00107$
   0041                      91 00133$:
   0041 DD 73 04             92 	ld	4 (ix),e
   0044 DD 72 05             93 	ld	5 (ix),d
                             94 ;../_atoi.c:43: sign = (*s == '-');
   0047 4B                   95 	ld	c,e
   0048 42                   96 	ld	b,d
   0049 1A                   97 	ld	a,(de)
   004A 6F                   98 	ld	l,a
   004B D6 2D                99 	sub	a,#0x2D
   004D 20 04               100 	jr	NZ,00139$
   004F 3E 01               101 	ld	a,#0x01
   0051 18 01               102 	jr	00140$
   0053                     103 00139$:
   0053 AF                  104 	xor	a,a
   0054                     105 00140$:
   0054 5F                  106 	ld	e,a
   0055 53                  107 	ld	d,e
                            108 ;../_atoi.c:44: if (*s == '-' || *s == '+') s++;
   0056 AF                  109 	xor	a,a
   0057 B3                  110 	or	a,e
   0058 20 05               111 	jr	NZ,00110$
   005A 7D                  112 	ld	a,l
   005B D6 2B               113 	sub	a,#0x2B
   005D 20 0A               114 	jr	NZ,00131$
   005F                     115 00110$:
   005F 21 01 00            116 	ld	hl,#0x0001
   0062 09                  117 	add	hl,bc
   0063 DD 75 04            118 	ld	4 (ix),l
   0066 DD 74 05            119 	ld	5 (ix),h
                            120 ;../_atoi.c:46: while (*s && *s >= '0' && *s <= '9') {
   0069                     121 00131$:
   0069 DD 7E 04            122 	ld	a,4 (ix)
   006C DD 77 FC            123 	ld	-4 (ix),a
   006F DD 7E 05            124 	ld	a,5 (ix)
   0072 DD 77 FD            125 	ld	-3 (ix),a
   0075                     126 00115$:
   0075 DD 6E FC            127 	ld	l,-4 (ix)
   0078 DD 66 FD            128 	ld	h,-3 (ix)
   007B 5E                  129 	ld	e,(hl)
   007C AF                  130 	xor	a,a
   007D B3                  131 	or	a,e
   007E 28 46               132 	jr	Z,00117$
   0080 7B                  133 	ld	a,e
   0081 D6 30               134 	sub	a, #0x30
   0083 E2r88s00            135 	jp	PO, 00143$
   0086 EE 80               136 	xor	a, #0x80
   0088                     137 00143$:
   0088 FArC6s00            138 	jp	M,00117$
   008B 3E 39               139 	ld	a,#0x39
   008D 93                  140 	sub	a, e
   008E E2r93s00            141 	jp	PO, 00144$
   0091 EE 80               142 	xor	a, #0x80
   0093                     143 00144$:
   0093 FArC6s00            144 	jp	M,00117$
                            145 ;../_atoi.c:47: rv = (rv * 10) + (*s - '0');
   0096 D5                  146 	push	de
   0097 DD 5E FE            147 	ld	e,-2 (ix)
   009A DD 56 FF            148 	ld	d,-1 (ix)
   009D 6B                  149 	ld	l,e
   009E 62                  150 	ld	h,d
   009F 29                  151 	add	hl,hl
   00A0 29                  152 	add	hl,hl
   00A1 19                  153 	add	hl,de
   00A2 29                  154 	add	hl,hl
   00A3 D1                  155 	pop	de
   00A4 4D                  156 	ld	c,l
   00A5 44                  157 	ld	b,h
   00A6 7B                  158 	ld	a,e
   00A7 6F                  159 	ld	l,a
   00A8 17                  160 	rla	
   00A9 9F                  161 	sbc	a,a
   00AA 67                  162 	ld	h,a
   00AB 7D                  163 	ld	a,l
   00AC C6 D0               164 	add	a,#0xD0
   00AE 6F                  165 	ld	l,a
   00AF 7C                  166 	ld	a,h
   00B0 CE FF               167 	adc	a,#0xFF
   00B2 67                  168 	ld	h,a
   00B3 09                  169 	add	hl,bc
   00B4 4D                  170 	ld	c,l
   00B5 44                  171 	ld	b,h
   00B6 DD 71 FE            172 	ld	-2 (ix),c
   00B9 DD 70 FF            173 	ld	-1 (ix),b
                            174 ;../_atoi.c:48: s++;
   00BC DD 34 FC            175 	inc	-4 (ix)
   00BF 20 B4               176 	jr	NZ,00115$
   00C1 DD 34 FD            177 	inc	-3 (ix)
   00C4 18 AF               178 	jr	00115$
   00C6                     179 00117$:
                            180 ;../_atoi.c:51: return (sign ? -rv : rv);
   00C6 AF                  181 	xor	a,a
   00C7 B2                  182 	or	a,d
   00C8 28 0D               183 	jr	Z,00120$
   00CA AF                  184 	xor	a,a
   00CB DD 9E FE            185 	sbc	a,-2 (ix)
   00CE 4F                  186 	ld	c,a
   00CF 3E 00               187 	ld	a,#0x00
   00D1 DD 9E FF            188 	sbc	a,-1 (ix)
   00D4 47                  189 	ld	b,a
   00D5 18 06               190 	jr	00121$
   00D7                     191 00120$:
   00D7 DD 4E FE            192 	ld	c,-2 (ix)
   00DA DD 46 FF            193 	ld	b,-1 (ix)
   00DD                     194 00121$:
   00DD 69                  195 	ld	l,c
   00DE 60                  196 	ld	h,b
   00DF DD F9               197 	ld	sp,ix
   00E1 DD E1               198 	pop	ix
   00E3 C9                  199 	ret
   00E4                     200 _atoi_end::
                            201 	.area _CODE
                            202 	.area _CABS
