                              1 ;--------------------------------------------------------------------------
                              2 ;  shift.s
                              3 ;
                              4 ;  Copyright (C) 2001, Michael Hope
                              5 ;
                              6 ;  This library is free software; you can redistribute it and/or modify it
                              7 ;  under the terms of the GNU General Public License as published by the
                              8 ;  Free Software Foundation; either version 2.1, or (at your option) any
                              9 ;  later version.
                             10 ;
                             11 ;  This library is distributed in the hope that it will be useful,
                             12 ;  but WITHOUT ANY WARRANTY; without even the implied warranty of
                             13 ;  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
                             14 ;  GNU General Public License for more details.
                             15 ;
                             16 ;  You should have received a copy of the GNU General Public License 
                             17 ;  along with this library; see the file COPYING. If not, write to the
                             18 ;  Free Software Foundation, 51 Franklin Street, Fifth Floor, Boston,
                             19 ;   MA 02110-1301, USA.
                             20 ;
                             21 ;  As a special exception, if you link this library with other files,
                             22 ;  some of which are compiled with SDCC, to produce an executable,
                             23 ;  this library does not by itself cause the resulting executable to
                             24 ;  be covered by the GNU General Public License. This exception does
                             25 ;  not however invalidate any other reasons why the executable file
                             26 ;   might be covered by the GNU General Public License.
                             27 ;--------------------------------------------------------------------------
                             28 
                             29         ;;
   0000                      30 __rrulong_rrx_s::
   0000 21 02 00             31         ld      hl,#2
   0003 39                   32         add     hl,sp
                             33 
   0004 5E                   34         ld      e,(hl)
   0005 23                   35         inc     hl
   0006 56                   36         ld      d,(hl)
   0007 23                   37         inc     hl
   0008 4E                   38         ld      c,(hl)
   0009 23                   39         inc     hl
   000A 46                   40         ld      b,(hl)
   000B 23                   41         inc     hl
   000C 7E                   42         ld      a,(hl)
                             43 
   000D 69                   44         ld      l,c
   000E 60                   45         ld      h,b
   000F                      46 1$:
   000F B7                   47         or      a,a
   0010 C8                   48         ret     Z
                             49 
   0011 CB 1C                50         rr      h
   0013 CB 1D                51         rr      l
   0015 CB 1A                52         rr      d
   0017 CB 1B                53         rr      e
                             54 
   0019 3D                   55         dec     a
   001A C3r0Fs00             56         jp      1$
                             57 
   001D                      58 __rrslong_rrx_s::
   001D 21 02 00             59         ld      hl,#2
   0020 39                   60         add     hl,sp
                             61 
   0021 5E                   62         ld      e,(hl)
   0022 23                   63         inc     hl
   0023 56                   64         ld      d,(hl)
   0024 23                   65         inc     hl
   0025 4E                   66         ld      c,(hl)
   0026 23                   67         inc     hl
   0027 46                   68         ld      b,(hl)
   0028 23                   69         inc     hl
   0029 7E                   70         ld      a,(hl)
                             71 
   002A 69                   72         ld      l,c
   002B 60                   73         ld      h,b
   002C                      74 1$:
   002C B7                   75         or      a,a
   002D C8                   76         ret     Z
                             77 
   002E CB 2C                78         sra     h
   0030 CB 1D                79         rr      l
   0032 CB 1A                80         rr      d
   0034 CB 1B                81         rr      e
                             82 
   0036 3D                   83         dec     a
   0037 C3r2Cs00             84         jp      1$
                             85  
   003A                      86 __rlslong_rrx_s::
   003A                      87 __rlulong_rrx_s::
   003A 21 02 00             88         ld      hl,#2
   003D 39                   89         add     hl,sp
                             90 
   003E 5E                   91         ld      e,(hl)
   003F 23                   92         inc     hl
   0040 56                   93         ld      d,(hl)
   0041 23                   94         inc     hl
   0042 4E                   95         ld      c,(hl)
   0043 23                   96         inc     hl
   0044 46                   97         ld      b,(hl)
   0045 23                   98         inc     hl
   0046 7E                   99         ld      a,(hl)
                            100 
   0047 69                  101         ld      l,c
   0048 60                  102         ld      h,b
   0049                     103 1$:
   0049 B7                  104         or      a,a
   004A C8                  105         ret     Z
                            106 
   004B CB 13               107         rl      e
   004D CB 12               108         rl      d
   004F CB 15               109         rl      l
   0051 CB 14               110         rl      h
                            111 
   0053 3D                  112         dec     a
   0054 C3r49s00            113         jp      1$
