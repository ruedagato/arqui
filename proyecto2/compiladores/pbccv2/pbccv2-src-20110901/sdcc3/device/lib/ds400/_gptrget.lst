                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.0.1 #6227 (Oct  2 2015) (Linux)
                              4 ; This file was generated Fri Oct  2 17:15:20 2015
                              5 ;--------------------------------------------------------
                              6 	.module _gptrget
                              7 	.optsdcc -mds400 --model-flat24
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; CPU specific extensions
                             11 ;--------------------------------------------------------
                             12 .flat24 on		; 24 bit flat addressing
                    0084     13 dpl1	=	0x84
                    0085     14 dph1	=	0x85
                    0086     15 dps	=	0x86
                    0093     16 dpx	=	0x93
                    0095     17 dpx1	=	0x95
                    009B     18 esp	=	0x9B
                    009C     19 ap	=	0x9C
                    009C     20 _ap	=	0x9C
                    00D1     21 mcnt0	=	0xD1
                    00D2     22 mcnt1	=	0xD2
                    00D3     23 ma	=	0xD3
                    00D4     24 mb	=	0xD4
                    00D5     25 mc	=	0xD5
                    00D1     26 F1	=	0xD1	; user flag
                             27 ;--------------------------------------------------------
                             28 ; Public variables in this module
                             29 ;--------------------------------------------------------
                             30 	.globl __gptrgetWord
                             31 	.globl __gptrget
                             32 ;--------------------------------------------------------
                             33 ; special function registers
                             34 ;--------------------------------------------------------
                             35 ;--------------------------------------------------------
                             36 ; special function bits
                             37 ;--------------------------------------------------------
                    00F7     38 _B_7	=	0x00f7
                    00F6     39 _B_6	=	0x00f6
                    00F5     40 _B_5	=	0x00f5
                             41 ;--------------------------------------------------------
                             42 ; overlayable register banks
                             43 ;--------------------------------------------------------
                             44 	.area REG_BANK_0	(REL,OVR,DATA)
   0000                      45 	.ds 8
                             46 	.area REG_BANK_3	(REL,OVR,DATA)
   0000                      47 	.ds 8
                             48 ;--------------------------------------------------------
                             49 ; internal ram data
                             50 ;--------------------------------------------------------
                             51 	.area DSEG    (DATA)
                             52 ;--------------------------------------------------------
                             53 ; overlayable items in internal ram 
                             54 ;--------------------------------------------------------
                             55 	.area OSEG    (OVR,DATA)
                             56 ;--------------------------------------------------------
                             57 ; indirectly addressable internal ram data
                             58 ;--------------------------------------------------------
                             59 	.area ISEG    (DATA)
                             60 ;--------------------------------------------------------
                             61 ; absolute internal ram data
                             62 ;--------------------------------------------------------
                             63 	.area IABS    (ABS,DATA)
                             64 	.area IABS    (ABS,DATA)
                             65 ;--------------------------------------------------------
                             66 ; bit data
                             67 ;--------------------------------------------------------
                             68 	.area BSEG    (BIT)
                             69 ;--------------------------------------------------------
                             70 ; paged external ram data
                             71 ;--------------------------------------------------------
                             72 	.area PSEG    (PAG,XDATA)
                             73 ;--------------------------------------------------------
                             74 ; external ram data
                             75 ;--------------------------------------------------------
                             76 	.area XSEG    (XDATA)
                             77 ;--------------------------------------------------------
                             78 ; absolute external ram data
                             79 ;--------------------------------------------------------
                             80 	.area XABS    (ABS,XDATA)
                             81 ;--------------------------------------------------------
                             82 ; external initialized ram data
                             83 ;--------------------------------------------------------
                             84 	.area XISEG   (XDATA)
                             85 ;--------------------------------------------------------
                             86 ; global & static initialisations
                             87 ;--------------------------------------------------------
                             88 	.area HOME    (CODE)
                             89 	.area GSINIT  (CODE)
                             90 	.area GSFINAL (CODE)
                             91 	.area GSINIT  (CODE)
                             92 ;--------------------------------------------------------
                             93 ; Home
                             94 ;--------------------------------------------------------
                             95 	.area HOME    (CODE)
                             96 	.area HOME    (CODE)
                             97 ;--------------------------------------------------------
                             98 ; code
                             99 ;--------------------------------------------------------
                            100 	.area CSEG    (CODE)
                            101 ;------------------------------------------------------------
                            102 ;Allocation info for local variables in function '_gptrget'
                            103 ;------------------------------------------------------------
                            104 ;gptr                      Allocated to registers 
                            105 ;------------------------------------------------------------
                            106 ;	_gptrget.c:167: _gptrget (char *gptr) __naked
                            107 ;	-----------------------------------------
                            108 ;	 function _gptrget
                            109 ;	-----------------------------------------
   0000                     110 __gptrget:
                            111 ;	naked function: no prologue.
                            112 ;	_gptrget.c:214: __endasm;
                            113 	
                            114     ;
                            115     ; depending on the pointer type acc. to SDCCsymt.h
                            116     ;
   0000 20 F7 14            117 	        jb _B_7,codeptr$ ; >0x80 code ; 3
   0003 30 F6 14            118 	        jnb _B_6,xdataptr$ ; <0x40 far ; 3
                            119 	
   0006 88 83               120 	        mov dph,r0 ; save r0 independant of regbank ; 2
   0008 A8 82               121 	        mov r0,dpl ; use only low order address ; 2
                            122 	
   000A 20 F5 07            123 	        jb _B_5,pdataptr$ ; >0x60 pdata ; 3
                            124     ;
                            125     ; Pointer to data space
                            126     ;
   000D E6                  127 	        mov a,@r0 ; 1
   000E                     128 	 dataptrrestore$:
   000E A8 83               129 	        mov r0,dph ; restore r0 ; 2
   0010 75 83 00            130 	        mov dph,#0 ; restore dph ; 2
   0013 22                  131 	        ret ; 1
                            132     ;
                            133     ; pointer to xternal stack or pdata
                            134     ;
   0014                     135 	 pdataptr$:
   0014 E2                  136 	        movx a,@r0 ; 1
   0015 80 F7               137 	        sjmp dataptrrestore$ ; 2
                            138     ;
                            139     ; pointer to code area, max 16 bits
                            140     ;
   0017                     141 	 codeptr$:
   0017 E4                  142 	        clr a ; 1
   0018 93                  143 	        movc a,@a+dptr ; 1
   0019 22                  144 	        ret ; 1
                            145     ;
                            146     ; pointer to xternal data, max 16 bits
                            147     ;
   001A                     148 	 xdataptr$:
   001A E0                  149 	        movx a,@dptr ; 1
   001B 22                  150 	        ret ; 1
                            151                                                         ;===
                            152                                                         ;27 bytes
                            153 	     
   001C                     154 00101$:
                            155 ;	naked function: no epilogue.
                            156 ;------------------------------------------------------------
                            157 ;Allocation info for local variables in function '_gptrgetWord'
                            158 ;------------------------------------------------------------
                            159 ;gptr                      Allocated to registers 
                            160 ;------------------------------------------------------------
                            161 ;	_gptrget.c:224: _gptrgetWord (unsigned *gptr)
                            162 ;	-----------------------------------------
                            163 ;	 function _gptrgetWord
                            164 ;	-----------------------------------------
   001C                     165 __gptrgetWord:
                    0002    166 	ar2 = 0x02
                    0003    167 	ar3 = 0x03
                    0004    168 	ar4 = 0x04
                    0005    169 	ar5 = 0x05
                    0006    170 	ar6 = 0x06
                    0007    171 	ar7 = 0x07
                    0000    172 	ar0 = 0x00
                    0001    173 	ar1 = 0x01
                            174 ;	_gptrget.c:284: __endasm;
                            175 	
                            176     ;
                            177     ; depending on the pointer type acc. to SDCCsymt.h
                            178     ;
   001C 20 F7 19            179 	        jb _B_7,00003$ ; >0x80 code
   001F 30 F6 0F            180 	        jnb _B_6,00002$ ; <0x40 far
                            181 	
   0022 88 83               182 	        mov dph,r0 ; save r0 independant of regbank
   0024 A8 82               183 	        mov r0,dpl ; use only low order address
                            184 	
   0026 20 F5 18            185 	        jb _B_5,00004$ ; >0x60 pdata
                            186     ;
                            187     ; Pointer to data space
                            188     ;
   0029 86 9C               189 	        mov _ap,@r0
   002B 08                  190 	        inc r0
   002C E6                  191 	        mov a,@r0
   002D 05 82               192 	        inc dpl
   002F 80 17               193 	        sjmp 00005$
                            194     ;
                            195     ; pointer to xternal data
                            196     ;
   0031                     197 	 00002$:
   0031 E0                  198 	        movx a,@dptr
   0032 F5 9C               199 	        mov _ap,a
   0034 A3                  200 	        inc dptr
   0035 E0                  201 	        movx a,@dptr
   0036 80 15               202 	        sjmp 00006$
                            203 ;
                            204 ; pointer to code area
                            205 ;
   0038                     206 	 00003$:
   0038 E4                  207 	        clr a
   0039 93                  208 	        movc a,@a+dptr
   003A F5 9C               209 	        mov _ap,a
   003C E4                  210 	        clr a
   003D A3                  211 	        inc dptr
   003E 93                  212 	        movc a,@a+dptr
   003F 80 0C               213 	        sjmp 00006$
                            214 ;
                            215 ; pointer to xternal stack
                            216 ;
   0041                     217 	 00004$:
   0041 E2                  218 	        movx a,@r0
   0042 F5 9C               219 	        mov _ap,a
   0044 08                  220 	        inc r0
   0045 E2                  221 	        movx a,@r0
   0046 05 82               222 	        inc dpl
                            223 ;
                            224 ; restore and return
                            225 ;
   0048                     226 	 00005$:
   0048 A8 83               227 	        mov r0,dph ; restore r0
   004A 75 83 00            228 	        mov dph,#0 ; restore dph
   004D                     229 	 00006$:
   004D C5 9C               230 	        xch a,_ap
                            231 	    
   004F                     232 00101$:
   004F 22                  233 	ret
                            234 	.area CSEG    (CODE)
                            235 	.area CONST   (CODE)
                            236 	.area XINIT   (CODE)
                            237 	.area CABS    (ABS,CODE)
