                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.0.1 #6227 (Oct  2 2015) (Linux)
                              4 ; This file was generated Fri Oct  2 17:15:31 2015
                              5 ;--------------------------------------------------------
                              6 	.module _divuint
                              7 	.optsdcc -mmcs51 --model-small
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 ;--------------------------------------------------------
                             13 ; special function registers
                             14 ;--------------------------------------------------------
                             15 	.area RSEG    (ABS,DATA)
   0000                      16 	.org 0x0000
                             17 ;--------------------------------------------------------
                             18 ; special function bits
                             19 ;--------------------------------------------------------
                             20 	.area RSEG    (ABS,DATA)
   0000                      21 	.org 0x0000
                             22 ;--------------------------------------------------------
                             23 ; overlayable register banks
                             24 ;--------------------------------------------------------
                             25 	.area REG_BANK_0	(REL,OVR,DATA)
   0000                      26 	.ds 8
                             27 ;--------------------------------------------------------
                             28 ; internal ram data
                             29 ;--------------------------------------------------------
                             30 	.area DSEG    (DATA)
                             31 ;--------------------------------------------------------
                             32 ; overlayable items in internal ram 
                             33 ;--------------------------------------------------------
                             34 	.area OSEG    (OVR,DATA)
                             35 ;--------------------------------------------------------
                             36 ; indirectly addressable internal ram data
                             37 ;--------------------------------------------------------
                             38 	.area ISEG    (DATA)
                             39 ;--------------------------------------------------------
                             40 ; absolute internal ram data
                             41 ;--------------------------------------------------------
                             42 	.area IABS    (ABS,DATA)
                             43 	.area IABS    (ABS,DATA)
                             44 ;--------------------------------------------------------
                             45 ; bit data
                             46 ;--------------------------------------------------------
                             47 	.area BSEG    (BIT)
                             48 ;--------------------------------------------------------
                             49 ; paged external ram data
                             50 ;--------------------------------------------------------
                             51 	.area PSEG    (PAG,XDATA)
                             52 ;--------------------------------------------------------
                             53 ; external ram data
                             54 ;--------------------------------------------------------
                             55 	.area XSEG    (XDATA)
                             56 ;--------------------------------------------------------
                             57 ; absolute external ram data
                             58 ;--------------------------------------------------------
                             59 	.area XABS    (ABS,XDATA)
                             60 ;--------------------------------------------------------
                             61 ; external initialized ram data
                             62 ;--------------------------------------------------------
                             63 	.area XISEG   (XDATA)
                             64 	.area HOME    (CODE)
                             65 	.area GSINIT0 (CODE)
                             66 	.area GSINIT1 (CODE)
                             67 	.area GSINIT2 (CODE)
                             68 	.area GSINIT3 (CODE)
                             69 	.area GSINIT4 (CODE)
                             70 	.area GSINIT5 (CODE)
                             71 	.area GSINIT  (CODE)
                             72 	.area GSFINAL (CODE)
                             73 	.area CSEG    (CODE)
                             74 ;--------------------------------------------------------
                             75 ; global & static initialisations
                             76 ;--------------------------------------------------------
                             77 	.area HOME    (CODE)
                             78 	.area GSINIT  (CODE)
                             79 	.area GSFINAL (CODE)
                             80 	.area GSINIT  (CODE)
                             81 ;--------------------------------------------------------
                             82 ; Home
                             83 ;--------------------------------------------------------
                             84 	.area HOME    (CODE)
                             85 	.area HOME    (CODE)
                             86 ;--------------------------------------------------------
                             87 ; code
                             88 ;--------------------------------------------------------
                             89 	.area CSEG    (CODE)
                             90 ;------------------------------------------------------------
                             91 ;Allocation info for local variables in function '_divuint_dummy'
                             92 ;------------------------------------------------------------
                             93 ;------------------------------------------------------------
                             94 ;	_divuint.c:51: _divuint_dummy (void) __naked
                             95 ;	-----------------------------------------
                             96 ;	 function _divuint_dummy
                             97 ;	-----------------------------------------
   0000                      98 __divuint_dummy:
                             99 ;	naked function: no prologue.
                            100 ;	_divuint.c:111: mov	count,#16
                            101 	
                            102 	
                            103 	 .globl __divuint
                            104 	
   0000                     105 	__divuint:
                            106 ;	# 71 "_divuint.c"
                            107 	 .globl __divint
                            108 	
   0000 E5 81               109 	 mov a,sp
   0002 24 FE               110 	 add a,#-2 ; 2 bytes return address
   0004 F8                  111 	 mov r0,a ; r0 points to yh
   0005 E6                  112 	 mov a,@r0 ; load yh
   0006 F9                  113 	 mov r1,a
   0007 18                  114 	 dec r0
   0008 E6                  115 	 mov a,@r0 ; load yl
   0009 F8                  116 	 mov r0,a
                            117 	
                            118 	
                            119 	
                            120 	
   000A                     121 	__divint:
                            122 ; entry point for __divsint
                            123 ;	# 111 "_divuint.c"
   000A 7A 10               124 	 mov r2,#16
   000C E4                  125 	 clr a
   000D FB                  126 	 mov r3,a
   000E FC                  127 	 mov r4,a
                            128 	
   000F                     129 	loop:
   000F E5 82               130 	 mov a,dpl ; x <<= 1
   0011 25 E0               131 	 add a,acc
   0013 F5 82               132 	 mov dpl,a
   0015 E5 83               133 	 mov a,dph
   0017 33                  134 	 rlc a
   0018 F5 83               135 	 mov dph,a
                            136 	
   001A EB                  137 	 mov a,r3 ; reste <<= 1
   001B 33                  138 	 rlc a ; feed in carry
   001C FB                  139 	 mov r3,a
   001D EC                  140 	 mov a,r4
   001E 33                  141 	 rlc a
   001F FC                  142 	 mov r4,a
                            143 	
   0020 EB                  144 	 mov a,r3 ; reste - y
   0021 98                  145 	 subb a,r0 ; here carry is always clear, because
                            146      ; reste <<= 1 never overflows
   0022 F5 F0               147 	 mov b,a
   0024 EC                  148 	 mov a,r4
   0025 99                  149 	 subb a,r1
                            150 	
   0026 40 06               151 	 jc smaller ; reste >= y?
                            152 	
   0028 FC                  153 	 mov r4,a ; -> yes; reste = reste - y;
   0029 AB F0               154 	 mov r3,b
   002B 43 82 01            155 	 orl dpl,#1
   002E                     156 	smaller:
                            157 ; -> no
   002E DA DF               158 	 djnz r2,loop
   0030 22                  159 	 ret
                            160 	
                            161 	 
                            162 ;	naked function: no epilogue.
                            163 	.area CSEG    (CODE)
                            164 	.area CONST   (CODE)
                            165 	.area XINIT   (CODE)
                            166 	.area CABS    (ABS,CODE)
