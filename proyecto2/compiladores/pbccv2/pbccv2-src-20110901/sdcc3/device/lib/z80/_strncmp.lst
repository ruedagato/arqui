                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.0.1 #6227 (Oct  2 2015) (Linux)
                              4 ; This file was generated Fri Oct  2 17:18:18 2015
                              5 ;--------------------------------------------------------
                              6 	.module _strncmp
                              7 	.optsdcc -mz80
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _strncmp
                             13 ;--------------------------------------------------------
                             14 ; special function registers
                             15 ;--------------------------------------------------------
                             16 ;--------------------------------------------------------
                             17 ;  ram data
                             18 ;--------------------------------------------------------
                             19 	.area _DATA
                             20 ;--------------------------------------------------------
                             21 ; overlayable items in  ram 
                             22 ;--------------------------------------------------------
                             23 	.area _OVERLAY
                             24 ;--------------------------------------------------------
                             25 ; external initialized ram data
                             26 ;--------------------------------------------------------
                             27 ;--------------------------------------------------------
                             28 ; global & static initialisations
                             29 ;--------------------------------------------------------
                             30 	.area _HOME
                             31 	.area _GSINIT
                             32 	.area _GSFINAL
                             33 	.area _GSINIT
                             34 ;--------------------------------------------------------
                             35 ; Home
                             36 ;--------------------------------------------------------
                             37 	.area _HOME
                             38 	.area _HOME
                             39 ;--------------------------------------------------------
                             40 ; code
                             41 ;--------------------------------------------------------
                             42 	.area _CODE
                             43 ;../_strncmp.c:31: int strncmp (
                             44 ;	---------------------------------
                             45 ; Function strncmp
                             46 ; ---------------------------------
   0000                      47 _strncmp_start::
   0000                      48 _strncmp:
   0000 DD E5                49 	push	ix
   0002 DD 21 00 00          50 	ld	ix,#0
   0006 DD 39                51 	add	ix,sp
   0008 F5                   52 	push	af
   0009 3B                   53 	dec	sp
                             54 ;../_strncmp.c:37: if (!count)
   000A DD 7E 08             55 	ld	a,8 (ix)
   000D DD B6 09             56 	or	a,9 (ix)
   0010 20 05                57 	jr	NZ,00114$
                             58 ;../_strncmp.c:38: return(0);
   0012 21 00 00             59 	ld	hl,#0x0000
   0015 18 5B                60 	jr	00108$
                             61 ;../_strncmp.c:40: while (--count && *first && *first == *last) {
   0017                      62 00114$:
   0017 DD 4E 04             63 	ld	c,4 (ix)
   001A DD 46 05             64 	ld	b,5 (ix)
   001D DD 5E 06             65 	ld	e,6 (ix)
   0020 DD 56 07             66 	ld	d,7 (ix)
   0023 DD 7E 08             67 	ld	a,8 (ix)
   0026 DD 77 FE             68 	ld	-2 (ix),a
   0029 DD 7E 09             69 	ld	a,9 (ix)
   002C DD 77 FF             70 	ld	-1 (ix),a
   002F                      71 00105$:
   002F DD 6E FE             72 	ld	l,-2 (ix)
   0032 DD 66 FF             73 	ld	h,-1 (ix)
   0035 2B                   74 	dec	hl
   0036 DD 75 FE             75 	ld	-2 (ix),l
   0039 DD 74 FF             76 	ld	-1 (ix),h
   003C DD 7E FE             77 	ld	a,-2 (ix)
   003F DD B6 FF             78 	or	a,-1 (ix)
   0042 28 1E                79 	jr	Z,00107$
   0044 0A                   80 	ld	a,(bc)
   0045 DD 77 FD             81 	ld	-3 (ix),a
   0048 AF                   82 	xor	a,a
   0049 DD B6 FD             83 	or	a,-3 (ix)
   004C 28 14                84 	jr	Z,00107$
   004E 1A                   85 	ld	a,(de)
   004F 6F                   86 	ld	l,a
   0050 C5                   87 	push	bc
                             88 ;	direct compare
   0051 DD 4E FD             89 	ld	c,-3 (ix)
   0054 7D                   90 	ld	a,l
   0055 91                   91 	sub	a,c
   0056 20 03                92 	jr	NZ,00116$
   0058 C1                   93 	pop	bc
   0059 18 03                94 	jr	00117$
   005B                      95 00116$:
   005B C1                   96 	pop	bc
   005C 18 04                97 	jr	00107$
   005E                      98 00117$:
                             99 ;../_strncmp.c:41: first++;
   005E 03                  100 	inc	bc
                            101 ;../_strncmp.c:42: last++;
   005F 13                  102 	inc	de
   0060 18 CD               103 	jr	00105$
   0062                     104 00107$:
                            105 ;../_strncmp.c:45: return( *first - *last );
   0062 0A                  106 	ld	a,(bc)
   0063 4F                  107 	ld	c,a
   0064 17                  108 	rla	
   0065 9F                  109 	sbc	a,a
   0066 47                  110 	ld	b,a
   0067 1A                  111 	ld	a,(de)
   0068 6F                  112 	ld	l,a
   0069 17                  113 	rla	
   006A 9F                  114 	sbc	a,a
   006B 67                  115 	ld	h,a
   006C 79                  116 	ld	a,c
   006D 95                  117 	sub	a,l
   006E 6F                  118 	ld	l,a
   006F 78                  119 	ld	a,b
   0070 9C                  120 	sbc	a,h
   0071 67                  121 	ld	h,a
   0072                     122 00108$:
   0072 DD F9               123 	ld	sp,ix
   0074 DD E1               124 	pop	ix
   0076 C9                  125 	ret
   0077                     126 _strncmp_end::
                            127 	.area _CODE
                            128 	.area _CABS
