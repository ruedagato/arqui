                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.0.1 #6227 (Oct  2 2015) (Linux)
                              4 ; This file was generated Fri Oct  2 17:18:18 2015
                              5 ;--------------------------------------------------------
                              6 	.module _strtok
                              7 	.optsdcc -mz80
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _strtok
                             13 ;--------------------------------------------------------
                             14 ; special function registers
                             15 ;--------------------------------------------------------
                             16 ;--------------------------------------------------------
                             17 ;  ram data
                             18 ;--------------------------------------------------------
                             19 	.area _DATA
   0000                      20 _strtok_s_1_1:
   0000                      21 	.ds 2
                             22 ;--------------------------------------------------------
                             23 ; overlayable items in  ram 
                             24 ;--------------------------------------------------------
                             25 	.area _OVERLAY
                             26 ;--------------------------------------------------------
                             27 ; external initialized ram data
                             28 ;--------------------------------------------------------
                             29 ;--------------------------------------------------------
                             30 ; global & static initialisations
                             31 ;--------------------------------------------------------
                             32 	.area _HOME
                             33 	.area _GSINIT
                             34 	.area _GSFINAL
                             35 	.area _GSINIT
                             36 ;--------------------------------------------------------
                             37 ; Home
                             38 ;--------------------------------------------------------
                             39 	.area _HOME
                             40 	.area _HOME
                             41 ;--------------------------------------------------------
                             42 ; code
                             43 ;--------------------------------------------------------
                             44 	.area _CODE
                             45 ;../_strtok.c:36: char * strtok (
                             46 ;	---------------------------------
                             47 ; Function strtok
                             48 ; ---------------------------------
   0000                      49 _strtok_start::
   0000                      50 _strtok:
   0000 DD E5                51 	push	ix
   0002 DD 21 00 00          52 	ld	ix,#0
   0006 DD 39                53 	add	ix,sp
                             54 ;../_strtok.c:43: if ( str )
   0008 DD 7E 04             55 	ld	a,4 (ix)
   000B DD B6 05             56 	or	a,5 (ix)
   000E 28 10                57 	jr	Z,00102$
                             58 ;../_strtok.c:44: s = str ;
   0010 DD 7E 04             59 	ld	a,4 (ix)
   0013 FD 21r00s00          60 	ld	iy,#_strtok_s_1_1
   0017 FD 77 00             61 	ld	0 (iy),a
   001A DD 7E 05             62 	ld	a,5 (ix)
   001D FD 77 01             63 	ld	1 (iy),a
   0020                      64 00102$:
                             65 ;../_strtok.c:45: if ( !s )
   0020 FD 21r00s00          66 	ld	iy,#_strtok_s_1_1
   0024 FD 7E 00             67 	ld	a,0 (iy)
   0027 FD B6 01             68 	or	a,1 (iy)
   002A 20 06                69 	jr	NZ,00108$
                             70 ;../_strtok.c:46: return NULL;
   002C 21 00 00             71 	ld	hl,#0x0000
   002F C3rBBs00             72 	jp	00119$
                             73 ;../_strtok.c:48: while (*s) {
   0032                      74 00108$:
   0032 2Ar00s00             75 	ld	hl,(_strtok_s_1_1)
   0035 7E                   76 	ld	a,(hl)
   0036 B7                   77 	or	a,a
   0037 28 24                78 	jr	Z,00110$
                             79 ;../_strtok.c:49: if (strchr(control,*s))
   0039 2Ar00s00             80 	ld	hl,(_strtok_s_1_1)
   003C 7E                   81 	ld	a, (hl)
   003D F5                   82 	push	af
   003E 33                   83 	inc	sp
   003F DD 6E 06             84 	ld	l,6 (ix)
   0042 DD 66 07             85 	ld	h,7 (ix)
   0045 E5                   86 	push	hl
   0046 CDr00s00             87 	call	_strchr
   0049 F1                   88 	pop	af
   004A 33                   89 	inc	sp
   004B 7D                   90 	ld	a,l
   004C B4                   91 	or	a,h
   004D 28 0E                92 	jr	Z,00110$
                             93 ;../_strtok.c:50: s++;
   004F FD 21r00s00          94 	ld	iy,#_strtok_s_1_1
   0053 FD 34 00             95 	inc	0 (iy)
   0056 20 DA                96 	jr	NZ,00108$
   0058 FD 34 01             97 	inc	1 (iy)
   005B 18 D5                98 	jr	00108$
                             99 ;../_strtok.c:52: break;
   005D                     100 00110$:
                            101 ;../_strtok.c:55: s1 = s ;
   005D ED 4Br00s00         102 	ld	bc,(_strtok_s_1_1)
                            103 ;../_strtok.c:57: while (*s) {
   0061                     104 00113$:
   0061 2Ar00s00            105 	ld	hl,(_strtok_s_1_1)
   0064 7E                  106 	ld	a,(hl)
   0065 B7                  107 	or	a,a
   0066 28 3C               108 	jr	Z,00115$
                            109 ;../_strtok.c:58: if (strchr(control,*s)) {
   0068 2Ar00s00            110 	ld	hl,(_strtok_s_1_1)
   006B 6E                  111 	ld	l,(hl)
   006C C5                  112 	push	bc
   006D 7D                  113 	ld	a,l
   006E F5                  114 	push	af
   006F 33                  115 	inc	sp
   0070 DD 6E 06            116 	ld	l,6 (ix)
   0073 DD 66 07            117 	ld	h,7 (ix)
   0076 E5                  118 	push	hl
   0077 CDr00s00            119 	call	_strchr
   007A F1                  120 	pop	af
   007B 33                  121 	inc	sp
   007C C1                  122 	pop	bc
   007D 7D                  123 	ld	a,l
   007E B4                  124 	or	a,h
   007F 28 15               125 	jr	Z,00112$
                            126 ;../_strtok.c:59: *s++ = '\0';
   0081 2Ar00s00            127 	ld	hl,(_strtok_s_1_1)
   0084 36 00               128 	ld	(hl),#0x00
   0086 FD 21r00s00         129 	ld	iy,#_strtok_s_1_1
   008A FD 34 00            130 	inc	0 (iy)
   008D 20 03               131 	jr	NZ,00131$
   008F FD 34 01            132 	inc	1 (iy)
   0092                     133 00131$:
                            134 ;../_strtok.c:60: return s1 ;
   0092 69                  135 	ld	l,c
   0093 60                  136 	ld	h,b
   0094 18 25               137 	jr	00119$
   0096                     138 00112$:
                            139 ;../_strtok.c:62: s++ ;
   0096 FD 21r00s00         140 	ld	iy,#_strtok_s_1_1
   009A FD 34 00            141 	inc	0 (iy)
   009D 20 C2               142 	jr	NZ,00113$
   009F FD 34 01            143 	inc	1 (iy)
   00A2 18 BD               144 	jr	00113$
   00A4                     145 00115$:
                            146 ;../_strtok.c:65: s = NULL;
   00A4 FD 21r00s00         147 	ld	iy,#_strtok_s_1_1
   00A8 FD 36 00 00         148 	ld	0 (iy),#0x00
   00AC FD 36 01 00         149 	ld	1 (iy),#0x00
                            150 ;../_strtok.c:67: if (*s1)
   00B0 0A                  151 	ld	a,(bc)
   00B1 B7                  152 	or	a,a
   00B2 28 04               153 	jr	Z,00117$
                            154 ;../_strtok.c:68: return s1;
   00B4 69                  155 	ld	l,c
   00B5 60                  156 	ld	h,b
   00B6 18 03               157 	jr	00119$
   00B8                     158 00117$:
                            159 ;../_strtok.c:70: return NULL;
   00B8 21 00 00            160 	ld	hl,#0x0000
   00BB                     161 00119$:
   00BB DD E1               162 	pop	ix
   00BD C9                  163 	ret
   00BE                     164 _strtok_end::
                            165 	.area _CODE
                            166 	.area _CABS
